(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1eb8e040"],{2537:function(t,e,r){"use strict";(function(t){var n,o=r("bd86"),i=r("795b"),a=r.n(i),s=(r("6762"),r("2fdb"),r("7f7f"),r("28a5"),r("386d"),r("6013")),c=r("1688"),u=r("a00b"),l=r("86a8");e["a"]=(n={mixins:[u["a"],l["a"]],components:{FluroInfiniteScroll:c["e"],FluroPagedContent:c["f"],PhotoKeywordTeaser:s["a"]},data:function(){return{loading:!0,search:"",searchFocussed:!1,debouncedSearch:this.search}},computed:{routeKey:function(){return this.$route.name.split(".")[0]}},methods:{view:function(t){console.log("Navigate to",t),this.$router.push({name:"photos.keyword",params:{keyword:t._id}})},chunked:function(e,r){return t.chunk(e,r)}},created:function(){},watch:{search:t.debounce(function(t){this.debouncedSearch=t},500)}},Object(o["a"])(n,"computed",{sorted:function(){var e=this;return t.orderBy(e.filtered,function(t){return String(t.title).toLowerCase()})},filtered:function(){var e=this,r=e.items;if(!e.debouncedSearch||!e.debouncedSearch.length)return r;var n=String(e.debouncedSearch).toLowerCase().trim(),o=n.split(" ");return t.filter(r,function(e){var r=String(e.title).trim().toLowerCase(),i=t.includes(r,n);if(i)return!0;var a=r.split(" ");a=a.concat(e.keywords);var s=t.every(o,function(e){return t.some(a,function(r){return t.includes(r,e)})});return!!s||void 0})}}),Object(o["a"])(n,"asyncComputed",{items:{default:[],get:function(){var t=this;return t.loading=!0,new a.a(function(e,r){t.$fluro.api.get("/photos/keyword/list",{params:{limit:1e5}}).then(function(r){e(r.data),t.loading=!1},function(e){r(e),t.loading=!1})})}}}),n)}).call(this,r("2ef0"))},"2fdb":function(t,e,r){"use strict";var n=r("5ca1"),o=r("d2c8"),i="includes";n(n.P+n.F*r("5147")(i),"String",{includes:function(t){return!!~o(this,t,i).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},5147:function(t,e,r){var n=r("2b4c")("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(r){try{return e[n]=!1,!"/./"[t](e)}catch(o){}}return!0}},6013:function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"teaser"},[r("v-img",{attrs:{src:t.url,"lazy-src":t.smallUrl,"aspect-ratio":"1.6"},scopedSlots:t._u([{key:"placeholder",fn:function(){return[r("v-layout",{attrs:{"fill-height":"","align-center":"","justify-center":""}},[t.loading?r("v-progress-circular",{attrs:{size:20,indeterminate:"",color:"grey lighten-5"}}):t._e()],1)]},proxy:!0}])}),r("div",{staticClass:"text"},[r("div",[r("h2",[t._v(t._s(t.item.title))]),r("h4",[t._v(t._s(t.item.definition))]),r("h5",[t._v(t._s(t.item.count)+" Photos")])])])],1)},o=[],i=r("2ef0"),a=r.n(i),s={props:["item"],computed:{realms:function(){return a.a.map(this.item.realms,"title").join(", ")},smallUrl:function(){return this.$fluro.asset.imageUrl(this.item.cover,50)},url:function(){return this.$fluro.asset.imageUrl(this.item.cover,320)},aspectRatio:function(){var t=this.item.cover;return t.width/t.height}},data:function(){return{loading:!0}},methods:{onLoad:function(){this.loading=!1},onError:function(){this.loading=!1}}},c=s,u=(r("8e15"),r("2877")),l=r("6544"),d=r.n(l),f=r("adda"),h=r("a722"),v=r("490a"),p=Object(u["a"])(c,n,o,!1,null,"3174abde",null);e["a"]=p.exports;d()(p,{VImg:f["a"],VLayout:h["a"],VProgressCircular:v["a"]})},6762:function(t,e,r){"use strict";var n=r("5ca1"),o=r("c366")(!0);n(n.P,"Array",{includes:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),r("9c6c")("includes")},7219:function(t,e,r){},"86a8":function(t,e,r){"use strict";(function(t){r("a481"),r("20d6");e["a"]={methods:{view:function(t){var e=this.$fluro.utils.getStringID(t);this.$router.push({query:{photo:e}})},previousPhoto:function(e){var r=this,n=r.sorted||[],o=t.findIndex(n,{_id:e}),i=o;i-=1,i<0&&(i=n.length-1);var a=n[i];if(console.log("PREVIOUS",e,o,i,a,n),a){var s=r.$fluro.utils.getStringID(a);r.$router.replace({query:{photo:s}})}},nextPhoto:function(e){var r=this,n=r.sorted||[],o=t.findIndex(n,{_id:e}),i=o;i+=1,i>n.length-1&&(i=0),console.log("NEXT",e,o,i,n);var a=n[i];if(a){var s=r.$fluro.utils.getStringID(a);r.$router.replace({query:{photo:s}})}}},activated:function(){console.log("PHOTO ACTIVATED");var t=this;t.$fluro.addEventListener("previousPhoto",t.previousPhoto),t.$fluro.addEventListener("nextPhoto",t.nextPhoto)},deactivated:function(){console.log("PHOTO DEACTIVATED");var t=this;t.$fluro.removeEventListener("previousPhoto",t.previousPhoto),t.$fluro.removeEventListener("nextPhoto",t.nextPhoto)}}}).call(this,r("2ef0"))},"8e15":function(t,e,r){"use strict";var n=r("7219"),o=r.n(n);o.a},af45:function(t,e,r){"use strict";var n=r("d9e7"),o=r.n(n);o.a},b210:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("flex-column",[r("flex-column-header",[r("page-header",{attrs:{type:"tag"},scopedSlots:t._u([{key:"left",fn:function(){return[r("h3",[t._v("Photos "),r("span",{staticClass:"text-muted"},[t._v("Keywords")])])]},proxy:!0},{key:"right",fn:function(){return[r("div",{staticClass:"search",class:{active:t.searchFocussed||t.search.length}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],attrs:{placeholder:"Filter keywords"},domProps:{value:t.search},on:{focus:function(e){t.searchFocussed=!0},blur:function(e){t.searchFocussed=!1},input:function(e){e.target.composing||(t.search=e.target.value)}}}),r("div",{staticClass:"search-icon",on:{click:function(e){t.search=""}}},[t.search.length?r("fluro-icon",{attrs:{icon:"times"}}):r("fluro-icon",{attrs:{icon:"search"}})],1)])]},proxy:!0}])})],1),t.loading?r("fluro-page-preloader",{attrs:{contain:""}}):[r("fluro-paged-content",{attrs:{items:t.sorted,"per-page":12},scopedSlots:t._u([{key:"default",fn:function(e){return[r("v-container",{attrs:{"pa-1":"",fluid:"","grid-list-sm":""}},[r("v-layout",{attrs:{row:"",wrap:""}},t._l(e.page,function(e){return r("v-flex",{attrs:{"d-flex":"",xs12:"",sm6:"",md4:"",lg3:""},on:{click:function(r){return t.view(e)}}},[r("photo-keyword-teaser",{attrs:{item:e}})],1)}),1)],1)]}}])})]],2)},o=[],i=r("2537"),a=i["a"],s=(r("af45"),r("2877")),c=r("6544"),u=r.n(c),l=r("a523"),d=r("0e8f"),f=r("a722"),h=Object(s["a"])(a,n,o,!1,null,null,null);e["default"]=h.exports;u()(h,{VContainer:l["a"],VFlex:d["a"],VLayout:f["a"]})},d2c8:function(t,e,r){var n=r("aae3"),o=r("be13");t.exports=function(t,e,r){if(n(e))throw TypeError("String#"+r+" doesn't accept regex!");return String(o(t))}},d9e7:function(t,e,r){}}]);
//# sourceMappingURL=chunk-1eb8e040.fb67564f.js.map