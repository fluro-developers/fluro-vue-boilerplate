(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-831f79a6"],{"19ff":function(t,e,s){"use strict";var a=s("d566"),n=s.n(a);n.a},"1d07":function(t,e,s){"use strict";(function(t){var a=s("795b"),n=s.n(a),o=s("8f64"),i=s("c6f9"),l=s("0956");e["a"]={computed:{contextName:function(){return this.host?this.host.firstName?this.host.firstName:this.host.title||"":""},selected:function(){var e=this;return t.chain(e.selection).orderBy(function(t){return t.title}).value()},notSelected:function(){var e=this;return t.chain(e.policies).filter(function(t){return!e.isSelected(t)}).orderBy(function(t){return t.title}).value()}},components:{FluroRealmDots:o["a"],FluroContentSelectButton:l["a"]},mixins:[i["a"]],props:{host:{type:Object},value:{type:Array,default:function(){return[]}}},data:function(){return{loading:!0}},asyncComputed:{policies:{default:[],get:function(){var t=this;return new n.a(function(e,s){t.$fluro.api.get("/content/policy").then(function(s){e(s.data),t.loading=!1}).catch(function(e){s(e),t.loading=!1})})}}},created:function(){this.setSelection(this.value)},watch:{value:function(){this.setSelection(this.value)},selection:function(){var t=this;this.$emit("input",t.selection)}},methods:{}}}).call(this,s("2ef0"))},"34ee":function(t,e,s){},"4fa4b":function(t,e,s){"use strict";(function(t){s("aef6");var a=s("dd99"),n=s("8e8f"),o=s("d7bf"),i=s("b026"),l=s("60fc");e["a"]={props:{fields:{type:Array,default:function(){var t=[];function e(e,s){s.key=e,t.push(s)}return e("firstName",{title:"First Name",minimum:1,maximum:1,type:"string",placeholder:"Eg. Jessica"}),e("lastName",{title:"Last Name",minimum:1,maximum:1,type:"string",placeholder:"Eg. Michaels"}),e("collectionEmail",{title:"Email Address",minimum:1,maximum:1,type:"string",description:"An invitation will be sent to this email address allowing the user to confirm and accept this persona",placeholder:"Eg. name@email.com"}),t}}},mixins:[n["a"]],components:{FluroAccessPassSelect:o["a"],FluroPermissionSelect:i["a"],FluroAvatarUpdate:l["a"],FluroRealmSelect:a["a"]},methods:{modelUpdated:function(){this.update(this.model)},resetPassword:function(){var t=this;return t.resetting=!0,t.$fluro.api.post("/user/reinvite/".concat(t.itemID)).then(function(e){t.resetting=!1;var s=t.model.collectionEmail;t.model.user&&(s=t.model.user.email),t.$fluro.notify("Instructions on how to reset password have been sent to ".concat(s))}).catch(function(e){t.$fluro.error(e),t.resetting=!1})}},watch:{title:function(t){this.$set(this.model,"title",this.title),this.update(this.model)}},created:function(){var t=this;t.model.policies||(t.model.policies=[])},asyncComputed:{},computed:{title:function(){return this.model&&this.model.firstName?"".concat(this.model.firstName," ").concat(this.model.lastName||""):""},contextName:function(){var e=this.model.firstName;return e&&e.length?(this.model.user&&(e="".concat(this.model.user.firstName)),t.endsWith(e,"s")?"".concat(e,"'"):"".concat(e,"'s")):""},showOutline:function(){return!1}},data:function(){return{resetting:!1}}}}).call(this,s("2ef0"))},8624:function(t,e,s){},"8e8f":function(t,e,s){"use strict";var a=s("5dc9"),n=s("ee8a"),o=s("cbec");e["a"]={props:{config:{type:Object,require:!0},context:{type:String,default:"new"}},data(){return{loading:!1}},extends:a["default"],components:{FluroContentForm:a["default"],FluroContentFormField:n["default"]},mixins:[o["a"]],computed:{itemID(){return this.model._id},definition(){return this.config.definition}},methods:{}}},b026:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"permission-select"},[t.model.length?[s("table",{staticClass:"table"},[t._m(0),s("tbody",t._l(t.model,function(e){return s("tr",[s("td",t._l(e.roles,function(e){return s("div",[s("fluro-icon",{attrs:{type:"role",left:""}}),s("strong",[t._v(t._s(e.title))])],1)}),0),s("td",t._l(e.realms,function(e){return s("div",[s("fluro-icon",{style:{color:e.bgColor},attrs:{icon:"circle",library:"fas"}}),t._v(" "+t._s(e.title)+"\n                        ")],1)}),0),s("td",{staticClass:"text-xs-right"},[s("v-btn",{staticClass:"ma-0",attrs:{small:"",icon:""},on:{click:function(s){return t.remove(e)}}},[s("fluro-icon",{attrs:{icon:"times"}})],1)],1)])}),0)])]:t._e(),s("fluro-card",[s("fluro-card-title",{staticClass:"border-bottom"},[s("h5",[t._v("Add permissions")]),s("p",{staticClass:"help-block"},[t._v("\n                Select a combination of roles and realms then click add to grant permissions.\n            ")])]),s("fluro-card-body",[s("v-layout",{attrs:{row:"",wrap:""}},[s("v-flex",{attrs:{xs12:"",md4:""}},[s("v-input",{staticClass:"no-flex"},[s("v-label",[t._v("Select a Role")]),s("p",{staticClass:"help-block"},[t._v("Select a role")]),s("fluro-content-select-button",{attrs:{block:"",type:"role"},model:{value:t.proposed.roles,callback:function(e){t.$set(t.proposed,"roles",e)},expression:"proposed.roles"}})],1)],1),s("v-flex",{attrs:{xs12:"",md5:""}},[s("v-input",{staticClass:"no-flex"},[s("v-label",[t._v("Select a Realm")]),s("p",{staticClass:"help-block"},[t._v("Select where this role can be used")]),s("fluro-realm-select",{attrs:{block:""},model:{value:t.proposed.realms,callback:function(e){t.$set(t.proposed,"realms",e)},expression:"proposed.realms"}})],1)],1),s("v-flex",{attrs:{xs12:"",md3:""}},[s("v-input",{staticClass:"no-flex"},[t.$vuetify.breakpoint.mdAndUp?[s("v-label",[t._v(" ")]),s("p",{staticClass:"help-block"},[t._v(" ")])]:t._e(),s("v-btn",{staticClass:"ma-0",attrs:{disabled:!t.valid,block:"",color:"primary"},on:{click:t.add}},[t._v("\n                            Add\n                            "),s("fluro-icon",{attrs:{right:"",icon:"plus"}})],1)],2)],1)],1)],1)],1)],2)},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{staticClass:"column"},[t._v("Role")]),s("th",{staticClass:"column"},[t._v("Realms")]),s("th",[t._v(" ")])])])}],o=s("f499"),i=s.n(o),l=s("dd99"),r=s("0956"),c={components:{FluroRealmSelect:l["a"],FluroContentSelectButton:r["a"]},mixins:[],props:{value:{type:Array,default:function(){return[]}}},data:function(){return{model:JSON.parse(i()(this.value)),loading:!0,proposed:{roles:[],realms:[]}}},computed:{valid:function(){if(this.proposed.roles&&this.proposed.roles.length&&this.proposed.realms&&this.proposed.realms.length)return!0}},asyncComputed:{},watch:{value:function(t){this.model=t},model:function(){var t=this;this.$emit("input",t.model)}},methods:{add:function(){console.log("ADD");var t=JSON.parse(i()(this.proposed));this.model.push(t),this.proposed={realms:[],roles:[]}},remove:function(t){var e=this.model.indexOf(t);this.model.splice(e,1)}}},u=c,d=(s("f620"),s("2877")),m=s("6544"),f=s.n(m),p=s("8336"),v=s("0e8f"),h=s("b675"),b=s("24c9"),x=s("a722"),_=Object(d["a"])(u,a,n,!1,null,"37c96d95",null);e["a"]=_.exports;f()(_,{VBtn:p["a"],VFlex:v["a"],VInput:h["a"],VLabel:b["a"],VLayout:x["a"]})},bfc2:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("flex-column",[t.loading?[s("fluro-page-preloader",{attrs:{contain:""}})]:s("tabset",{attrs:{justified:!0,vertical:!0},scopedSlots:t._u([{key:"menuprefix",fn:function(){return["edit"==t.context&&t.$vuetify.breakpoint.smAndUp?[s("flex-column-header",{staticStyle:{"text-align":"center"}},[s("div",{staticStyle:{padding:"10px","max-width":"200px",margin:"auto"}},[s("fluro-avatar-update",{attrs:{id:t.model._id,type:"persona"}})],1)])]:t._e()]},proxy:!0}])},[s("tab",{attrs:{heading:"Login Details"}},[t._t("default",[s("flex-column-body",{staticStyle:{background:"#fafafa"}},[s("v-container",{staticClass:"grid-list-xl"},[s("constrain",{attrs:{sm:""}},[t.$vuetify.breakpoint.xsOnly?["edit"==t.context?[s("div",{staticStyle:{"max-width":"200px",margin:"auto"}},[s("fluro-avatar-update",{attrs:{id:t.model._id,type:"persona"}})],1)]:t._e()]:t._e(),t.model.user?[s("v-layout",{attrs:{row:"",wrap:""}},[s("v-flex",{attrs:{xs12:"",sm6:""}},[s("v-input",{staticClass:"no-flex"},[s("v-label",[t._v("First Name")]),s("Div",{staticClass:"lead"},[t._v(t._s(t.model.user.firstName))])],1)],1),s("v-flex",{attrs:{xs12:"",sm6:""}},[s("v-input",{staticClass:"no-flex"},[s("v-label",[t._v("Last Name")]),s("Div",{staticClass:"lead"},[t._v(t._s(t.model.user.lastName))])],1)],1)],1),s("v-input",{staticClass:"no-flex"},[s("v-label",[t._v("Email Address")]),s("Div",{staticClass:"lead"},[t._v(t._s(t.model.user.email))])],1),s("p"),s("p"),s("v-input",{staticClass:"no-flex"},[s("v-label",[t._v("Change User Details")]),s("p",{staticClass:"help-block"},[t._v("To change "+t._s(t.contextName)+" password or email details click the button below, this will send an invitation to the user to create a new password and then login to the system")]),s("v-btn",{staticClass:"mx-0",attrs:{color:"primary",loading:t.resetting},on:{click:t.resetPassword}},[t._v("\n                                        Send Reset Request\n                                        "),s("fluro-icon",{attrs:{right:"",icon:"paper-plane"}})],1)],1)]:[s("h3",{attrs:{margin:""}},[t._v("Basic Details")]),s("v-layout",{attrs:{row:"",wrap:""}},[s("v-flex",{attrs:{xs12:"",sm6:""}},[s("fluro-content-form-field",{attrs:{autofocus:!0,"form-fields":t.formFields,outline:t.showOutline,options:t.options,field:t.fieldHash.firstName},on:{input:t.update},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})],1),s("v-flex",{attrs:{xs12:"",sm6:""}},[s("fluro-content-form-field",{attrs:{"form-fields":t.formFields,outline:t.showOutline,options:t.options,field:t.fieldHash.lastName},on:{input:t.update},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})],1)],1),s("fluro-content-form-field",{attrs:{"form-fields":t.formFields,outline:t.showOutline,options:t.options,field:t.fieldHash.collectionEmail},on:{input:t.update},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})]],2)],1)],1)])],2),s("tab",{attrs:{heading:"Access Passes"}},[t._t("default",[s("flex-column-body",{staticStyle:{background:"#fafafa"}},[s("v-container",{attrs:{"grid-list-xl":""}},[s("constrain",{attrs:{sm:""}},[s("h3",{attrs:{margin:""}},[t._v(t._s(t.contextName)+" Access Passes")]),s("fluro-access-pass-select",{attrs:{host:t.model},on:{input:t.modelUpdated},model:{value:t.model.policies,callback:function(e){t.$set(t.model,"policies",e)},expression:"model.policies"}})],1)],1)],1)])],2),s("tab",{attrs:{heading:"Individual Permissions"}},[t._t("default",[s("flex-column-body",{staticStyle:{background:"#fafafa"}},[s("v-container",{attrs:{"grid-list-xl":""}},[s("constrain",{attrs:{sm:""}},[s("h3",{attrs:{margin:""}},[t._v(t._s(t.contextName)+" Individual Permissions")]),s("fluro-permission-select",{on:{input:t.modelUpdated},model:{value:t.model.permissionSets,callback:function(e){t.$set(t.model,"permissionSets",e)},expression:"model.permissionSets"}})],1)],1)],1)])],2)],1)],2)},n=[],o=s("4fa4b"),i=o["a"],l=(s("d276"),s("2877")),r=s("6544"),c=s.n(r),u=s("8336"),d=s("a523"),m=s("0e8f"),f=s("b675"),p=s("24c9"),v=s("a722"),h=Object(l["a"])(i,a,n,!1,null,"3b88ab79",null);e["default"]=h.exports;c()(h,{VBtn:u["a"],VContainer:d["a"],VFlex:m["a"],VInput:f["a"],VLabel:p["a"],VLayout:v["a"]})},d276:function(t,e,s){"use strict";var a=s("34ee"),n=s.n(a);n.a},d566:function(t,e,s){},d7bf:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"access-pass-select"},[t.selected.length?s("v-input",{staticClass:"no-flex"},[s("h5",{attrs:{margin:""}},[t._v(t._s(t.selected.length)+" selected")]),s("list-group",[s("transition-group",{attrs:{type:"transition",name:"flip-list"}},t._l(t.selected,function(e){return s("list-group-item",{key:e._id,scopedSlots:t._u([{key:"left",fn:function(){return[s("fluro-realm-bar",{attrs:{realm:e.realms}})]},proxy:!0},{key:"default",fn:function(){return[s("strong",[t._v(t._s(e.title))]),s("div",{staticClass:"muted sm"},[t._v(t._s(e.description))])]},proxy:!0},{key:"right",fn:function(){return[s("v-btn",{staticClass:"ma-0",attrs:{small:"",icon:""},on:{click:function(s){return t.deselect(e)}}},[s("fluro-icon",{attrs:{icon:"times"}})],1)]},proxy:!0}],null,!0)})}),1)],1)],1):t._e(),s("p"),s("v-input",{staticClass:"no-flex"},[s("h5",[t._v("Available passes")]),s("p",{staticClass:"help-block"},[t._v("Add passes to "+t._s(t.contextName)+" by selecting from available passes below")]),s("list-group",[s("transition-group",{attrs:{type:"transition",name:"flip-list"}},t._l(t.notSelected,function(e){return s("list-group-item",{key:e._id,staticClass:"inactive",scopedSlots:t._u([{key:"left",fn:function(){return[s("fluro-realm-bar",{attrs:{realm:e.realms}})]},proxy:!0},{key:"default",fn:function(){return[s("strong",[t._v(t._s(e.title))]),s("div",{staticClass:"muted sm"},[t._v(t._s(e.description))])]},proxy:!0},{key:"right",fn:function(){return[s("v-btn",{staticClass:"ma-0",attrs:{color:"primary",small:""},on:{click:function(s){return t.select(e)}}},[t._v("\n                        Add\n                        "),s("fluro-icon",{attrs:{right:"",icon:"plus"}})],1)]},proxy:!0}],null,!0)})}),1)],1)],1)],1)},n=[],o=s("1d07"),i=o["a"],l=(s("19ff"),s("2877")),r=s("6544"),c=s.n(r),u=s("8336"),d=s("b675"),m=Object(l["a"])(i,a,n,!1,null,"2f05b4ee",null);e["a"]=m.exports;c()(m,{VBtn:u["a"],VInput:d["a"]})},f620:function(t,e,s){"use strict";var a=s("8624"),n=s.n(a);n.a}}]);
//# sourceMappingURL=chunk-831f79a6.b4e89f94.js.map