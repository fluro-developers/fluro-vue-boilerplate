(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2b13f71b"],{"11e9":function(t,e,r){var n=r("52a7"),i=r("4630"),o=r("6821"),a=r("6a99"),c=r("69a8"),s=r("c69a"),u=Object.getOwnPropertyDescriptor;e.f=r("9e1e")?u:function(t,e){if(t=o(t),e=a(e,!0),s)try{return u(t,e)}catch(r){}if(c(t,e))return i(!n.f.call(t,e),t[e])}},"2fdb":function(t,e,r){"use strict";var n=r("5ca1"),i=r("d2c8"),o="includes";n(n.P+n.F*r("5147")(o),"String",{includes:function(t){return!!~i(this,t,o).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},5147:function(t,e,r){var n=r("2b4c")("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(r){try{return e[n]=!1,!"/./"[t](e)}catch(i){}}return!0}},"52a7":function(t,e){e.f={}.propertyIsEnumerable},5342:function(t,e,r){"use strict";(function(t){var n,i,o=r("795b"),a=r.n(o),c=r("bd86"),s=(r("6762"),r("2fdb"),r("7f7f"),r("28a5"),r("386d"),r("dcf6")),u=r("1688"),l=r("a00b"),h=r("86a8");e["a"]=(i={props:{source:[String,Object]},mixins:[l["a"],h["a"]],components:{FluroInfiniteScroll:u["e"],FluroPagedContent:u["f"],PhotoThumbnail:s["a"]},data:function(){return{loading:!0,search:"",searchFocussed:!1,debouncedSearch:this.search}},computed:{routeKey:function(){return this.$route.name.split(".")[0]}},methods:{view:function(t){var e=this.$fluro.utils.getStringID(t);this.$router.push({query:{photo:e}})}},created:function(){},watch:{search:t.debounce(function(t){this.debouncedSearch=t},500)}},Object(c["a"])(i,"computed",(n={sourceItem:function(){return this.meta.item},photos:function(){return this.meta.photos}},Object(c["a"])(n,"photos",function(){return this.meta.photos}),Object(c["a"])(n,"sorted",function(){return this.filtered}),Object(c["a"])(n,"filtered",function(){var e=this,r=e.photos;if(!e.debouncedSearch||!e.debouncedSearch.length)return r;var n=String(e.debouncedSearch).toLowerCase().trim(),i=n.split(" ");return t.filter(r,function(e){var r=String(e.title).trim().toLowerCase(),o=t.includes(r,n);if(o)return!0;var a=r.split(" ");a=a.concat(e.keywords);var c=t.every(i,function(e){return t.some(a,function(r){return t.includes(r,e)})});return!!c||void 0})}),n)),Object(c["a"])(i,"asyncComputed",{meta:{default:{},get:function(){var t=this,e=t.$fluro.utils.getStringID(t.source);return t.loading=!0,new a.a(function(r,n){t.$fluro.api.get("/photos/photographer/".concat(e),{params:{verbose:!0,simple:"false",select:["title","managedAuthor","created","data.photographer","data.event","width","colors","height"],limit:1e4}}).then(function(e){r(e.data),t.loading=!1},function(e){n(e),t.loading=!1})})}}}),i)}).call(this,r("2ef0"))},"5dbc":function(t,e,r){var n=r("d3f4"),i=r("8b97").set;t.exports=function(t,e,r){var o,a=e.constructor;return a!==r&&"function"==typeof a&&(o=a.prototype)!==r.prototype&&n(o)&&i&&i(t,o),t}},6762:function(t,e,r){"use strict";var n=r("5ca1"),i=r("c366")(!0);n(n.P,"Array",{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r("9c6c")("includes")},"773d":function(t,e,r){"use strict";var n=r("c607"),i=r.n(n);i.a},"86a8":function(t,e,r){"use strict";(function(t){r("a481"),r("20d6");e["a"]={methods:{view:function(t){var e=this.$fluro.utils.getStringID(t);this.$router.push({query:{photo:e}})},previousPhoto:function(e){var r=this,n=r.sorted||[],i=t.findIndex(n,{_id:e}),o=i;o-=1,o<0&&(o=n.length-1);var a=n[o];if(console.log("PREVIOUS",e,i,o,a,n),a){var c=r.$fluro.utils.getStringID(a);r.$router.replace({query:{photo:c}})}},nextPhoto:function(e){var r=this,n=r.sorted||[],i=t.findIndex(n,{_id:e}),o=i;o+=1,o>n.length-1&&(o=0),console.log("NEXT",e,i,o,n);var a=n[o];if(a){var c=r.$fluro.utils.getStringID(a);r.$router.replace({query:{photo:c}})}}},activated:function(){console.log("PHOTO ACTIVATED");var t=this;t.$fluro.addEventListener("previousPhoto",t.previousPhoto),t.$fluro.addEventListener("nextPhoto",t.nextPhoto)},deactivated:function(){console.log("PHOTO DEACTIVATED");var t=this;t.$fluro.removeEventListener("previousPhoto",t.previousPhoto),t.$fluro.removeEventListener("nextPhoto",t.nextPhoto)}}}).call(this,r("2ef0"))},"8b97":function(t,e,r){var n=r("d3f4"),i=r("cb7c"),o=function(t,e){if(i(t),!n(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{n=r("9b43")(Function.call,r("11e9").f(Object.prototype,"__proto__").set,2),n(t,[]),e=!(t instanceof Array)}catch(i){e=!0}return function(t,r){return o(t,r),e?t.__proto__=r:n(t,r),t}}({},!1):void 0),check:o}},9093:function(t,e,r){var n=r("ce10"),i=r("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,i)}},aa77:function(t,e,r){var n=r("5ca1"),i=r("be13"),o=r("79e5"),a=r("fdef"),c="["+a+"]",s="​",u=RegExp("^"+c+c+"*"),l=RegExp(c+c+"*$"),h=function(t,e,r){var i={},c=o(function(){return!!a[t]()||s[t]()!=s}),u=i[t]=c?e(f):a[t];r&&(i[r]=u),n(n.P+n.F*c,"String",i)},f=h.trim=function(t,e){return t=String(i(t)),1&e&&(t=t.replace(u,"")),2&e&&(t=t.replace(l,"")),t};t.exports=h},c5f6:function(t,e,r){"use strict";var n=r("7726"),i=r("69a8"),o=r("2d95"),a=r("5dbc"),c=r("6a99"),s=r("79e5"),u=r("9093").f,l=r("11e9").f,h=r("86cc").f,f=r("aa77").trim,d="Number",p=n[d],g=p,m=p.prototype,v=o(r("2aeb")(m))==d,b="trim"in String.prototype,y=function(t){var e=c(t,!1);if("string"==typeof e&&e.length>2){e=b?e.trim():f(e,3);var r,n,i,o=e.charCodeAt(0);if(43===o||45===o){if(r=e.charCodeAt(2),88===r||120===r)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+e}for(var a,s=e.slice(2),u=0,l=s.length;u<l;u++)if(a=s.charCodeAt(u),a<48||a>i)return NaN;return parseInt(s,n)}}return+e};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(t){var e=arguments.length<1?0:t,r=this;return r instanceof p&&(v?s(function(){m.valueOf.call(r)}):o(r)!=d)?a(new g(y(e)),r,p):y(e)};for(var _,w=r("9e1e")?u(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),I=0;w.length>I;I++)i(g,_=w[I])&&!i(p,_)&&h(p,_,l(g,_));p.prototype=m,m.constructor=p,r("2aba")(n,d,p)}},c607:function(t,e,r){},c7ae:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("flex-column",[t.loading?r("fluro-page-preloader",{attrs:{contain:""}}):[r("flex-column-header",[r("page-header",{attrs:{icon:"camera"},scopedSlots:t._u([{key:"left",fn:function(){return[r("h3",{staticClass:"text-capitalize"},[t._v(t._s(t.sourceItem.title)+"\n                        "),r("span",{staticClass:"text-muted"},[t._v("\n                            Photographer\n                        ")])])]},proxy:!0},{key:"right",fn:function(){return[r("div",{staticClass:"search",class:{active:t.searchFocussed||t.search.length}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],attrs:{placeholder:"Filter keywords"},domProps:{value:t.search},on:{focus:function(e){t.searchFocussed=!0},blur:function(e){t.searchFocussed=!1},input:function(e){e.target.composing||(t.search=e.target.value)}}}),r("div",{staticClass:"search-icon",on:{click:function(e){t.search=""}}},[t.search.length?r("fluro-icon",{attrs:{icon:"times"}}):r("fluro-icon",{attrs:{icon:"search"}})],1)])]},proxy:!0},{key:"rightmobile",fn:function(){},proxy:!0}])})],1),t.sorted.length?[r("flex-column-body",{attrs:{"scroll-parent":""}},[r("fluro-infinite-scroll",{attrs:{perPage:24,startPage:1,items:t.sorted},scopedSlots:t._u([{key:"default",fn:function(e){return[r("masonry",t._l(e.page,function(e){return r("brick",{attrs:{portrait:e.height>e.width}},[r("v-flex",{staticStyle:{padding:"2px",height:"100%",width:"100%"},attrs:{"d-flex":""},on:{click:function(r){return t.view(e)}}},[r("photo-thumbnail",{staticStyle:{width:"100%",height:"100%"},attrs:{image:e}})],1)],1)}),1)]}}])})],1)]:[r("empty-text",{attrs:{icon:"camera"}},[r("h3",[t._v("No photographers")]),r("p",[t._v("No results match your criteria")])])]]],2)},i=[],o=r("5342"),a=o["a"],c=(r("773d"),r("2877")),s=r("6544"),u=r.n(s),l=r("0e8f"),h=Object(c["a"])(a,n,i,!1,null,null,null);e["default"]=h.exports;u()(h,{VFlex:l["a"]})},cb5a:function(t,e,r){},d2c8:function(t,e,r){var n=r("aae3"),i=r("be13");t.exports=function(t,e,r){if(n(e))throw TypeError("String#"+r+" doesn't accept regex!");return String(i(t))}},db3a:function(t,e,r){"use strict";var n=r("cb5a"),i=r.n(n);i.a},dcf6:function(t,e,r){"use strict";var n=function(){var t,e=this,r=e.$createElement,n=e._self._c||r;return n("div",{staticClass:"photo-thumbnail",class:e.classes,style:e.style},[n("div",{staticClass:"thumb-top"},[n("div",{staticClass:"thumb-left"},[e._v("\n            \n                "+e._s(e.title)+"\n                "),n("div",{staticClass:"small text-muted"},[e._v(e._s(e.date))])]),n("div",{staticClass:"thumb-right"},[n("v-btn",{attrs:{dark:"",icon:"",color:e.selected?"primary":""},on:{click:function(t){return t.stopPropagation(),e.toggleSelection()}}},[n("font-awesome-icon",{attrs:{icon:e.selectionIcon}})],1)],1)]),n("fluro-image",{attrs:{cover:"",spinner:!0,imageWidth:e.imageWidth,imageHeight:e.imageHeight,width:e.width,height:e.height,item:e.image},on:{load:e.onLoad,error:e.onError}}),n("div",{staticClass:"shader"}),n("div",{staticClass:"thumb-bottom"},[n("div",{staticClass:"thumb-left"},[e.photographer?[n("a",{on:{click:function(t){return t.stopPropagation(),e.viewPhotographer()}}},[n("fluro-avatar",{attrs:{id:e.photographer._id,left:"",type:e.photographer.style}})],1),e._v("\n                    "+e._s(e.photographer.title)+"\n                ")]:e._e()],2),n("div",{staticClass:"thumb-right"},[n("v-btn",{attrs:{dark:"",icon:""},on:{click:function(t){return t.stopPropagation(),e.download()}}},[n("font-awesome-icon",{attrs:{icon:["fas","cloud-download"]}})],1),e.user?n("v-btn",{attrs:{dark:"",icon:""},on:{click:function(t){return t.stopPropagation(),e.togglePin()}}},[n("font-awesome-icon",e._b({attrs:{icon:e.pinIcon}},"font-awesome-icon",(t={},t["spin"]=e.pinning,t),!1))],1):e._e()],1)])],1)},i=[],o=(r("c5f6"),r("cadf"),r("551c"),r("097d"),r("2ef0")),a=r.n(o),c=r("bf89"),s={props:{image:{type:Object},width:{type:Number},height:{type:Number},defaultColor:{type:String,default:"#ebeef0"}},mixins:[c["a"]],data:function(){return{loading:!0}},computed:{selectionIcon:function(){return this.selected?["fas","check"]:["far","square"]},calculatedWidth:function(){var t=this;return t.width?t.width:320},calculatedHeight:function(){var t=this;return t.aspectRatio?t.calculatedWidth*t.aspectRatio:t.height?t.height:t.calculatedWidth},imageWidth:function(){return this.calculatedWidth?this.calculatedWidth:320},imageHeight:function(){return this.calculatedHeight?this.calculatedHeight:320},classes:function(){var t=[];return this.selected&&t.push("selected"),t},selected:function(){return this.$selection.isSelected(this.image)},itemID:function(){return this.$fluro.utils.getStringID(this.image)},style:function(){return{backgroundColor:a.a.get(this.image,"colors[0]")||this.defaultColor}},title:function(){return a.a.get(this.image,"data.event.title")||a.a.get(this,"image.title")},date:function(){var t=a.a.get(this,"image.created");if(t)return this.$filters.formatDate(t,"D MMM YYYY")},photographer:function(){var t=this.image,e=a.a.get(t,"data.photographer"),r=a.a.get(t,"managedAuthor");return e&&e.title?{_id:e._id,style:"contact",title:e.title}:r&&r.title?{_id:r._id,style:"persona",title:r.title}:void 0},smallUrl:function(){return this.$fluro.asset.imageUrl(this.image,50)},url:function(){return this.$fluro.asset.imageUrl(this.image,320)},aspectRatio:function(){var t=this.image;if(t)return t.height/t.width}},methods:{toggleSelection:function(){var t={title:this.image.title,_id:this.image._id,definition:"photo",_type:"image"};this.$selection.toggle(t)},viewPhotographer:function(){var t=this.photographer._id;"contact"==this.photographer.style&&this.$router.push({name:"photographer",params:{id:t}})},download:function(){if(this.image){var t=this.$fluro.asset.downloadUrl(this.image,{filename:this.image.filename});window.open(t)}},onLoad:function(){this.loading=!1},onError:function(){this.loading=!1}}},u=s,l=(r("db3a"),r("2877")),h=r("6544"),f=r.n(h),d=r("8336"),p=Object(l["a"])(u,n,i,!1,null,"a6740bc2",null);e["a"]=p.exports;f()(p,{VBtn:d["a"]})},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=chunk-2b13f71b.5ec92e48.js.map