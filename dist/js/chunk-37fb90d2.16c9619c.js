(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-37fb90d2"],{"11e9":function(t,e,n){var i=n("52a7"),r=n("4630"),o=n("6821"),a=n("6a99"),c=n("69a8"),s=n("c69a"),u=Object.getOwnPropertyDescriptor;e.f=n("9e1e")?u:function(t,e){if(t=o(t),e=a(e,!0),s)try{return u(t,e)}catch(n){}if(c(t,e))return r(!i.f.call(t,e),t[e])}},"14f1":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("flex-column",[t.loading?n("fluro-page-preloader",{attrs:{contain:""}}):[n("flex-column-header",[n("page-header",{attrs:{icon:"clock"},scopedSlots:t._u([{key:"left",fn:function(){return[n("h3",{staticClass:"text-capitalize"},[t._v(t._s(t.sourceItem.title)+"\n                        "),n("span",{staticClass:"text-muted"},[t._v("\n                            "+t._s(t._f("definitionTitle")(t.sourceItem.definition,!1,"tag"))+"\n                        ")])])]},proxy:!0},{key:"right",fn:function(){return[n("div",{staticClass:"search",class:{active:t.searchFocussed||t.search.length}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],attrs:{placeholder:"Filter keywords"},domProps:{value:t.search},on:{focus:function(e){t.searchFocussed=!0},blur:function(e){t.searchFocussed=!1},input:function(e){e.target.composing||(t.search=e.target.value)}}}),n("div",{staticClass:"search-icon",on:{click:function(e){t.search=""}}},[t.search.length?n("fluro-icon",{attrs:{icon:"times"}}):n("fluro-icon",{attrs:{icon:"search"}})],1)])]},proxy:!0},{key:"rightmobile",fn:function(){},proxy:!0}])})],1),t.sorted.length?[n("flex-column-body",{attrs:{"scroll-parent":""}},[n("fluro-infinite-scroll",{attrs:{perPage:24,startPage:1,items:t.sorted},scopedSlots:t._u([{key:"default",fn:function(e){return[n("masonry",t._l(e.page,function(e){return n("brick",{attrs:{portrait:e.height>e.width}},[n("v-flex",{staticStyle:{padding:"2px",height:"100%",width:"100%"},attrs:{"d-flex":""},on:{click:function(n){return t.view(e)}}},[n("photo-thumbnail",{staticStyle:{width:"100%",height:"100%"},attrs:{image:e}})],1)],1)}),1)]}}])})],1)]:[n("empty-text",{attrs:{icon:"tag"}},[n("h3",[t._v("No photos")]),n("p",[t._v("No photos match your criteria")])])]]],2)},r=[],o=n("1ad6"),a=o["a"],c=(n("2b2c"),n("2877")),s=n("6544"),u=n.n(s),l=n("0e8f"),h=Object(c["a"])(a,i,r,!1,null,null,null);e["default"]=h.exports;u()(h,{VFlex:l["a"]})},"1ad6":function(t,e,n){"use strict";(function(t){var i,r=n("bd86"),o=n("795b"),a=n.n(o),c=(n("6762"),n("2fdb"),n("7f7f"),n("28a5"),n("386d"),n("dcf6")),s=n("1688"),u=n("a00b"),l=n("86a8");e["a"]=(i={props:{source:[String,Object]},mixins:[u["a"],l["a"]],components:{FluroInfiniteScroll:s["e"],FluroPagedContent:s["f"],PhotoThumbnail:c["a"]},data:function(){return{loading:!0,search:"",searchFocussed:!1,debouncedSearch:this.search}},computed:{routeKey:function(){return this.$route.name.split(".")[0]}},methods:{view:function(t){var e=this.$fluro.utils.getStringID(t);this.$router.push({query:{photo:e}})}},created:function(){},watch:{search:t.debounce(function(t){this.debouncedSearch=t},500)}},Object(r["a"])(i,"computed",{sourceItem:function(){return this.meta.item},photos:function(){return this.meta.photos},sorted:function(){return this.filtered},filtered:function(){var e=this,n=e.photos;if(!e.debouncedSearch||!e.debouncedSearch.length)return n;var i=String(e.debouncedSearch).toLowerCase().trim(),r=i.split(" ");return t.filter(n,function(e){var n=String(e.title).trim().toLowerCase(),o=t.includes(n,i);if(o)return!0;var a=n.split(" ");a=a.concat(e.keywords);var c=t.every(r,function(e){return t.some(a,function(n){return t.includes(n,e)})});return!!c||void 0})}}),Object(r["a"])(i,"asyncComputed",{meta:{default:{},get:function(){var t=this,e=t.$fluro.utils.getStringID(t.source);return t.loading=!0,new a.a(function(n,i){t.$fluro.api.get("/photos/tag/".concat(e),{params:{verbose:!0,simple:"false",select:["title","managedAuthor","created","data.photographer","data.event","width","colors","height"],limit:1e4}}).then(function(e){n(e.data),t.loading=!1},function(e){i(e),t.loading=!1})})}}}),i)}).call(this,n("2ef0"))},"2b2c":function(t,e,n){"use strict";var i=n("caf2"),r=n.n(i);r.a},"2fdb":function(t,e,n){"use strict";var i=n("5ca1"),r=n("d2c8"),o="includes";i(i.P+i.F*n("5147")(o),"String",{includes:function(t){return!!~r(this,t,o).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},5147:function(t,e,n){var i=n("2b4c")("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[i]=!1,!"/./"[t](e)}catch(r){}}return!0}},"52a7":function(t,e){e.f={}.propertyIsEnumerable},"5dbc":function(t,e,n){var i=n("d3f4"),r=n("8b97").set;t.exports=function(t,e,n){var o,a=e.constructor;return a!==n&&"function"==typeof a&&(o=a.prototype)!==n.prototype&&i(o)&&r&&r(t,o),t}},6762:function(t,e,n){"use strict";var i=n("5ca1"),r=n("c366")(!0);i(i.P,"Array",{includes:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")("includes")},"86a8":function(t,e,n){"use strict";(function(t){n("a481"),n("20d6");e["a"]={methods:{view:function(t){var e=this.$fluro.utils.getStringID(t);this.$router.push({query:{photo:e}})},previousPhoto:function(e){var n=this,i=n.sorted||[],r=t.findIndex(i,{_id:e}),o=r;o-=1,o<0&&(o=i.length-1);var a=i[o];if(console.log("PREVIOUS",e,r,o,a,i),a){var c=n.$fluro.utils.getStringID(a);n.$router.replace({query:{photo:c}})}},nextPhoto:function(e){var n=this,i=n.sorted||[],r=t.findIndex(i,{_id:e}),o=r;o+=1,o>i.length-1&&(o=0),console.log("NEXT",e,r,o,i);var a=i[o];if(a){var c=n.$fluro.utils.getStringID(a);n.$router.replace({query:{photo:c}})}}},activated:function(){console.log("PHOTO ACTIVATED");var t=this;t.$fluro.addEventListener("previousPhoto",t.previousPhoto),t.$fluro.addEventListener("nextPhoto",t.nextPhoto)},deactivated:function(){console.log("PHOTO DEACTIVATED");var t=this;t.$fluro.removeEventListener("previousPhoto",t.previousPhoto),t.$fluro.removeEventListener("nextPhoto",t.nextPhoto)}}}).call(this,n("2ef0"))},"8b97":function(t,e,n){var i=n("d3f4"),r=n("cb7c"),o=function(t,e){if(r(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{i=n("9b43")(Function.call,n("11e9").f(Object.prototype,"__proto__").set,2),i(t,[]),e=!(t instanceof Array)}catch(r){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:i(t,n),t}}({},!1):void 0),check:o}},9093:function(t,e,n){var i=n("ce10"),r=n("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,r)}},aa77:function(t,e,n){var i=n("5ca1"),r=n("be13"),o=n("79e5"),a=n("fdef"),c="["+a+"]",s="​",u=RegExp("^"+c+c+"*"),l=RegExp(c+c+"*$"),h=function(t,e,n){var r={},c=o(function(){return!!a[t]()||s[t]()!=s}),u=r[t]=c?e(f):a[t];n&&(r[n]=u),i(i.P+i.F*c,"String",r)},f=h.trim=function(t,e){return t=String(r(t)),1&e&&(t=t.replace(u,"")),2&e&&(t=t.replace(l,"")),t};t.exports=h},c5f6:function(t,e,n){"use strict";var i=n("7726"),r=n("69a8"),o=n("2d95"),a=n("5dbc"),c=n("6a99"),s=n("79e5"),u=n("9093").f,l=n("11e9").f,h=n("86cc").f,f=n("aa77").trim,d="Number",p=i[d],g=p,m=p.prototype,v=o(n("2aeb")(m))==d,b="trim"in String.prototype,y=function(t){var e=c(t,!1);if("string"==typeof e&&e.length>2){e=b?e.trim():f(e,3);var n,i,r,o=e.charCodeAt(0);if(43===o||45===o){if(n=e.charCodeAt(2),88===n||120===n)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+e}for(var a,s=e.slice(2),u=0,l=s.length;u<l;u++)if(a=s.charCodeAt(u),a<48||a>r)return NaN;return parseInt(s,i)}}return+e};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof p&&(v?s(function(){m.valueOf.call(n)}):o(n)!=d)?a(new g(y(e)),n,p):y(e)};for(var _,w=n("9e1e")?u(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),I=0;w.length>I;I++)r(g,_=w[I])&&!r(p,_)&&h(p,_,l(g,_));p.prototype=m,m.constructor=p,n("2aba")(i,d,p)}},caf2:function(t,e,n){},cb5a:function(t,e,n){},d2c8:function(t,e,n){var i=n("aae3"),r=n("be13");t.exports=function(t,e,n){if(i(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(r(t))}},db3a:function(t,e,n){"use strict";var i=n("cb5a"),r=n.n(i);r.a},dcf6:function(t,e,n){"use strict";var i=function(){var t,e=this,n=e.$createElement,i=e._self._c||n;return i("div",{staticClass:"photo-thumbnail",class:e.classes,style:e.style},[i("div",{staticClass:"thumb-top"},[i("div",{staticClass:"thumb-left"},[e._v("\n            \n                "+e._s(e.title)+"\n                "),i("div",{staticClass:"small text-muted"},[e._v(e._s(e.date))])]),i("div",{staticClass:"thumb-right"},[i("v-btn",{attrs:{dark:"",icon:"",color:e.selected?"primary":""},on:{click:function(t){return t.stopPropagation(),e.toggleSelection()}}},[i("font-awesome-icon",{attrs:{icon:e.selectionIcon}})],1)],1)]),i("fluro-image",{attrs:{cover:"",spinner:!0,imageWidth:e.imageWidth,imageHeight:e.imageHeight,width:e.width,height:e.height,item:e.image},on:{load:e.onLoad,error:e.onError}}),i("div",{staticClass:"shader"}),i("div",{staticClass:"thumb-bottom"},[i("div",{staticClass:"thumb-left"},[e.photographer?[i("a",{on:{click:function(t){return t.stopPropagation(),e.viewPhotographer()}}},[i("fluro-avatar",{attrs:{id:e.photographer._id,left:"",type:e.photographer.style}})],1),e._v("\n                    "+e._s(e.photographer.title)+"\n                ")]:e._e()],2),i("div",{staticClass:"thumb-right"},[i("v-btn",{attrs:{dark:"",icon:""},on:{click:function(t){return t.stopPropagation(),e.download()}}},[i("font-awesome-icon",{attrs:{icon:["fas","cloud-download"]}})],1),e.user?i("v-btn",{attrs:{dark:"",icon:""},on:{click:function(t){return t.stopPropagation(),e.togglePin()}}},[i("font-awesome-icon",e._b({attrs:{icon:e.pinIcon}},"font-awesome-icon",(t={},t["spin"]=e.pinning,t),!1))],1):e._e()],1)])],1)},r=[],o=(n("c5f6"),n("cadf"),n("551c"),n("097d"),n("2ef0")),a=n.n(o),c=n("bf89"),s={props:{image:{type:Object},width:{type:Number},height:{type:Number},defaultColor:{type:String,default:"#ebeef0"}},mixins:[c["a"]],data:function(){return{loading:!0}},computed:{selectionIcon:function(){return this.selected?["fas","check"]:["far","square"]},calculatedWidth:function(){var t=this;return t.width?t.width:320},calculatedHeight:function(){var t=this;return t.aspectRatio?t.calculatedWidth*t.aspectRatio:t.height?t.height:t.calculatedWidth},imageWidth:function(){return this.calculatedWidth?this.calculatedWidth:320},imageHeight:function(){return this.calculatedHeight?this.calculatedHeight:320},classes:function(){var t=[];return this.selected&&t.push("selected"),t},selected:function(){return this.$selection.isSelected(this.image)},itemID:function(){return this.$fluro.utils.getStringID(this.image)},style:function(){return{backgroundColor:a.a.get(this.image,"colors[0]")||this.defaultColor}},title:function(){return a.a.get(this.image,"data.event.title")||a.a.get(this,"image.title")},date:function(){var t=a.a.get(this,"image.created");if(t)return this.$filters.formatDate(t,"D MMM YYYY")},photographer:function(){var t=this.image,e=a.a.get(t,"data.photographer"),n=a.a.get(t,"managedAuthor");return e&&e.title?{_id:e._id,style:"contact",title:e.title}:n&&n.title?{_id:n._id,style:"persona",title:n.title}:void 0},smallUrl:function(){return this.$fluro.asset.imageUrl(this.image,50)},url:function(){return this.$fluro.asset.imageUrl(this.image,320)},aspectRatio:function(){var t=this.image;if(t)return t.height/t.width}},methods:{toggleSelection:function(){var t={title:this.image.title,_id:this.image._id,definition:"photo",_type:"image"};this.$selection.toggle(t)},viewPhotographer:function(){var t=this.photographer._id;"contact"==this.photographer.style&&this.$router.push({name:"photographer",params:{id:t}})},download:function(){if(this.image){var t=this.$fluro.asset.downloadUrl(this.image,{filename:this.image.filename});window.open(t)}},onLoad:function(){this.loading=!1},onError:function(){this.loading=!1}}},u=s,l=(n("db3a"),n("2877")),h=n("6544"),f=n.n(h),d=n("8336"),p=Object(l["a"])(u,i,r,!1,null,"a6740bc2",null);e["a"]=p.exports;f()(p,{VBtn:d["a"]})},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=chunk-37fb90d2.16c9619c.js.map