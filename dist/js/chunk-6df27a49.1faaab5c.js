(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6df27a49"],{"41bb":function(e,t,i){},8427:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("flex-column",[e.loading?[i("fluro-page-preloader",{attrs:{contain:""}})]:i("tabset",{attrs:{justified:!0,vertical:!0},scopedSlots:e._u([{key:"menuprefix",fn:function(){return["edit"==e.context&&e.$vuetify.breakpoint.mdAndUp?[i("flex-column-header",{staticStyle:{"text-align":"center"}},[i("div",{staticStyle:{padding:"10px","max-width":"200px",margin:"auto"}},[i("fluro-avatar-update",{attrs:{id:e.model._id,type:"contact"}})],1),i("v-container",{staticClass:"border-bottom text-xs-center",attrs:{fluid:""}},[i("v-btn",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"ma-0 mx-1 ml-0",attrs:{disabled:!e.canEmail,icon:"",color:"primary",content:"Send Email"},on:{click:function(t){return e.communicate("email")}}},[i("fluro-icon",{attrs:{library:"fas",icon:"envelope"}})],1),i("v-btn",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"ma-0 mx-1",attrs:{disabled:!e.canSMS,icon:"",color:"primary",content:"Send SMS"},on:{click:function(t){return e.communicate("sms")}}},[i("fluro-icon",{attrs:{library:"fas",icon:"comment"}})],1),i("v-btn",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"ma-0 mx-1",attrs:{disabled:!e.canCall,icon:"",color:"primary",content:"Call"},on:{click:function(t){return e.communicate("phone")}}},[i("fluro-icon",{attrs:{library:"fas",icon:"phone"}})],1),i("v-btn",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"ma-0 mx-1 mr-0",attrs:{icon:"",color:"primary",content:"Save"}},[i("fluro-icon",{attrs:{library:"fas",icon:"download"}})],1)],1)],1)]:e._e()]},proxy:!0}])},[(e.itemID,e._e()),i("tab",{attrs:{heading:"Basic Details"}},[e._t("default",[i("flex-column-body",{staticStyle:{background:"#fafafa"}},[i("v-container",{staticClass:"grid-list-xl"},[i("constrain",{attrs:{sm:""}},[i("h3",{attrs:{margin:""}},[e._v("Basic Details")]),e.$vuetify.breakpoint.xsOnly?["edit"==e.context?[i("div",{staticStyle:{"max-width":"200px",margin:"auto"}},[i("fluro-avatar-update",{attrs:{id:e.model._id,type:"contact"}})],1)]:e._e()]:e._e(),i("wrapper",{attrs:{xs:""}},[i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{class:{xs12:e.$vuetify.breakpoint.xsOnly}},[i("fluro-content-form-field",{staticClass:"right-messages",attrs:{autofocus:e.$vuetify.breakpoint.smAndUp,"form-fields":e.formFields,outline:e.showOutline,options:e.formOptions,field:e.fieldHash.firstName},on:{input:e.update},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}}),e.showPreferredName?i("fluro-content-form-field",{staticClass:"right-messages",attrs:{"form-fields":e.formFields,outline:e.showOutline,options:e.formOptions,field:e.fieldHash.preferredName},on:{input:e.update},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}}):e._e(),e.showEthnicName?i("fluro-content-form-field",{staticClass:"right-messages",attrs:{"form-fields":e.formFields,outline:e.showOutline,options:e.formOptions,field:e.fieldHash.ethnicName},on:{input:e.update},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}}):e._e(),i("div",{staticClass:"additions"},[e.showPreferredName?e._e():i("a",{staticClass:"hint",on:{click:function(t){e.show.preferredName=!0}}},[e._v("Add Nick/Preferred Name")]),e.showEthnicName?e._e():i("a",{staticClass:"hint",on:{click:function(t){e.show.ethnicName=!0}}},[e._v("Add Ethnic Name")])])],1),e.showMiddleName?i("v-flex",{class:{xs12:e.$vuetify.breakpoint.xsOnly}},[i("fluro-content-form-field",{attrs:{"form-fields":e.formFields,outline:e.showOutline,options:e.formOptions,field:e.fieldHash.middleName},on:{input:e.update},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})],1):e._e(),i("v-flex",{class:{xs12:e.$vuetify.breakpoint.xsOnly}},[i("fluro-content-form-field",{staticClass:"right-messages",attrs:{"form-fields":e.formFields,outline:e.showOutline,options:e.formOptions,field:e.fieldHash.lastName},on:{input:e.update},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}}),e.showMaidenName?i("fluro-content-form-field",{staticClass:"right-messages",attrs:{"form-fields":e.formFields,outline:e.showOutline,options:e.formOptions,field:e.fieldHash.maidenName},on:{input:e.update},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}}):e._e(),i("div",{staticClass:"additions"},[e.showMiddleName?e._e():i("a",{staticClass:"hint",on:{click:function(t){e.show.middleName=!0}}},[e._v("Add Middle Name")]),e.showMaidenName?e._e():i("a",{staticClass:"hint",on:{click:function(t){e.show.maidenName=!0}}},[e._v("Add Maiden Name")])])],1)],1),e.contactDefinitions.length?[i("fluro-content-form-field",{attrs:{"form-fields":e.formFields,outline:e.showOutline,options:e.formOptions,field:e.definitionField},on:{input:e.update},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})]:e._e()],2),i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs12:"",sm6:""}},[i("fluro-content-form-field",{attrs:{"form-fields":e.formFields,outline:e.showOutline,options:e.formOptions,field:e.fieldHash.gender},on:{input:e.update},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})],1),i("v-flex",{attrs:{xs12:"",sm6:""}},[i("fluro-content-form-field",{attrs:{"form-fields":e.formFields,outline:e.showOutline,options:e.formOptions,field:e.fieldHash.maritalStatus},on:{input:e.update},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})],1)],1),i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs12:"",sm6:""}},[i("fluro-content-form-field",{attrs:{"form-fields":e.formFields,options:e.formOptions,field:e.fieldHash.emails},on:{input:e.update},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})],1),i("v-flex",{attrs:{xs12:"",sm6:""}},[i("fluro-content-form-field",{attrs:{"form-fields":e.formFields,options:e.formOptions,field:e.fieldHash.phoneNumbers},on:{input:e.update},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})],1)],1),i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs12:"",sm6:""}},[i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs6:""}},[i("fluro-content-form-field",{attrs:{"form-fields":e.formFields,outline:e.showOutline,options:e.formOptions,field:e.fieldHash.dob},on:{input:e.update},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})],1),i("v-flex",{attrs:{xs6:""}},[i("fluro-content-form-field",{attrs:{"form-fields":e.formFields,outline:e.showOutline,options:e.formOptions,field:e.fieldHash.dobVerified},on:{input:e.update},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})],1)],1)],1),i("v-flex",{attrs:{xs12:"",sm6:""}},[i("fluro-content-form-field",{attrs:{"form-fields":e.formFields,outline:e.showOutline,options:e.formOptions,field:e.fieldHash.timezone},on:{input:e.update},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})],1)],1),i("wrapper",{attrs:{xs:""}},[i("v-input",{staticClass:"no-flex"},[i("v-label",[e._v("School / Academic Details")]),i("fluro-academic-select",{attrs:{"form-fields":e.formFields,outline:e.showOutline,options:e.formOptions},on:{calendar:e.updateAcademicCalendar,grade:e.updateAcademicGrade},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})],1),i("v-input",{staticClass:"no-flex"},[i("v-label",[e._v("Checkin Nametag Notes")]),i("p",{staticClass:"help-block"},[e._v("Publicly displayed notes to be printed on "+e._s(e.contextName)+" nametag")]),i("fluro-content-form-field",{attrs:{"form-fields":e.formFields,showLabel:!1,outline:e.showOutline,options:e.formOptions,field:e.fieldHash.nametagNotes},on:{input:e.update},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})],1)],1)],2)],1)],1)])],2),i("tab",{attrs:{heading:"Household & Relationships"}},[e._t("default",[i("flex-column-body",{staticStyle:{background:"#fafafa"}},[i("v-container",{attrs:{"grid-list-xl":""}},[i("constrain",{attrs:{sm:""}},["edit"==e.context?[i("h3",{attrs:{margin:""}},[e._v("Household & Relationships")]),i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs12:"",sm6:""}},[i("fluro-content-form-field",{attrs:{"override-label":e.contextName+" Household Role","form-fields":e.formFields,outline:e.showOutline,options:e.formOptions,field:e.fieldHash.householdRole},on:{input:e.update},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})],1)],1),i("v-input",{staticClass:"no-flex"},[i("v-label",[e._v("Family Household")]),i("p",{staticClass:"help-block"},[e._v("Select "+e._s(e.contextName)+" primary residence")]),i("fluro-content-form-field",{attrs:{"form-fields":e.formFields,showLabel:!1,outline:e.showOutline,options:e.formOptions,field:e.fieldHash.family},on:{input:e.update},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})],1)]:[i("h3",{attrs:{margin:""}},[e._v("Household")]),i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs12:"",sm6:""}},[i("fluro-content-form-field",{attrs:{"override-label":e.contextName+" Household Role","form-fields":e.formFields,outline:e.showOutline,options:e.formOptions,field:e.fieldHash.householdRole},on:{input:e.update},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})],1)],1),i("h5",[e._v(e._s(e.contextName)+" Household")]),i("fluro-content-form",{attrs:{options:e.formOptions,fields:e.familyFields},on:{input:e.updateFamily},model:{value:e.family,callback:function(t){e.family=t},expression:"family"}})]],2)],1)],1)])],2),i("tab",{attrs:{heading:"Groups & Teams"}},[e._t("default",[i("flex-column-body",{staticStyle:{background:"#fafafa"}})])],2),i("tab",{attrs:{heading:"Processes"}},[e._t("default",[i("flex-column-body",{staticStyle:{background:"#fafafa"}})])],2),"edit"==e.context?i("tab",{attrs:{heading:"Rostering / Availability"}},[e._t("default",[i("flex-column-body",{staticStyle:{background:"#fafafa"}},[i("v-container",{attrs:{"grid-list-xl":""}},[i("constrain",{attrs:{sm:""}},[i("h3",{attrs:{margin:""}},[e._v("Rostering / Availability")]),i("v-input",{staticClass:"no-flex"},[i("v-label",[e._v("Capabilities")]),i("p",{staticClass:"help-block"},[e._v("Add to "+e._s(e.contextName)+" capabilities")]),i("fluro-content-form-field",{attrs:{"form-fields":e.formFields,showLabel:!1,outline:e.showOutline,options:e.formOptions,field:e.fieldHash.capabilities},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})],1)],1)],1)],1)])],2):e._e(),"edit"==e.context?i("tab",{attrs:{heading:"Notifications"}},[e._t("default",[i("flex-column-body",{staticStyle:{background:"#fafafa"}},[i("v-container",{attrs:{"grid-list-xl":""}},[i("constrain",{attrs:{sm:""}},[i("h3",{attrs:{margin:""}},[e._v("Notifications")]),i("fluro-content-form-field",{attrs:{"form-fields":e.formFields,outline:e.showOutline,options:e.formOptions,field:e.fieldHash.countryCode},on:{input:e.update},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}}),e.phoneNumbers.length||e.emails.length?i("v-input",{staticClass:"no-flex"},[i("v-label",[e._v("Communication Preferences")]),i("p",{staticClass:"help-block"},[e._v("Manage "+e._s(e.contextName)+" subscription preferences below")]),i("div",{staticClass:"toggle-items"},[e.emails.length?[i("fluro-toggle-item",{attrs:{inactive:e.unsubscribedMailout},nativeOn:{click:function(t){return e.toggleSubscription("mailout")}}},[e._v("\n                                            Allow Promotional Emails\n                                        ")])]:e._e(),e.phoneNumbers.length?[i("fluro-toggle-item",{attrs:{inactive:e.unsubscribedSMS},nativeOn:{click:function(t){return e.toggleSubscription("sms")}}},[e._v("\n                                            Allow Promotional SMS\n                                        ")])]:e._e()],2)],1):e._e(),i("p"),e.devices.length?i("v-input",{staticClass:"no-flex"},[i("v-label",[e._v(e._s(e.contextName)+" Connected Devices")]),i("list-group",e._l(e.devices,function(t){return i("list-group-item",{scopedSlots:e._u([{key:"left",fn:function(){return[i("fluro-icon",{attrs:{icon:"mobile"}})]},proxy:!0},{key:"default",fn:function(){return[i("div",[i("strong",{staticClass:"text-capitalize"},[e._v("\n                                                    "+e._s(t.application)+" - "+e._s(t.metadata.model)+"\n                                                ")]),i("div",{staticClass:"sm text-muted"},[e._v(e._s(t.metadata.platform)+" "+e._s(t.metadata.version))])])]},proxy:!0},{key:"right",fn:function(){return[i("v-btn",{attrs:{small:"",loading:t.pinging},on:{click:function(i){return e.ping(t)}}},[e._v("\n                                                Ping\n                                            ")])]},proxy:!0}],null,!0)})}),1),i("p",{staticClass:"help-block"},[e._v("\n                                    If you are experiencing problems with push notifications it can sometimes be helpful to reset all devices for a contact allowing them to reconnect next time they sign in to an application\n                                ")]),i("v-btn",{attrs:{small:""},on:{click:function(t){return e.resetDevices()}}},[i("span",[e._v("Reset all devices")]),i("fluro-icon",{attrs:{icon:"trash"}})],1)],1):e._e()],1)],1)],1)])],2):e._e(),e._l(e.sheetDefinitions,function(t){return i("tab",{key:t._id,attrs:{heading:t.title}},[e._t("default",[i("flex-column-body",{staticStyle:{background:"#fafafa"}},[i("v-container",[i("constrain",{attrs:{sm:""}},[i("h3",{attrs:{margin:""}},[e._v(e._s(t.title))]),i("v-input",{staticClass:"no-flex"},[i("v-label",[e._v("Realms")]),i("p",{staticClass:"help-block"},[e._v("Select where "+e._s(e.contextName)+" "+e._s(t.title)+" information should be stored")]),i("fluro-realm-select",{attrs:{type:"contactdetail",definition:t.definitionName},model:{value:e.details[t.definitionName].realms,callback:function(i){e.$set(e.details[t.definitionName],"realms",i)},expression:"details[sheet.definitionName].realms"}})],1),i("fluro-content-form",{attrs:{options:e.formOptions,fields:t.fields},on:{input:e.updateSheet},model:{value:e.details[t.definitionName].data,callback:function(i){e.$set(e.details[t.definitionName],"data",i)},expression:"details[sheet.definitionName].data"}})],1)],1)],1)])],2)}),"edit"==e.context?i("tab",{attrs:{heading:"Metadata"}},[e._t("default",[i("flex-column-body",{staticStyle:{background:"#fafafa"}},[i("v-container",[i("constrain",{attrs:{sm:""}},[i("h3",{attrs:{margin:""}},[e._v("Metadata")]),i("fluro-content-form-field",{attrs:{"form-fields":e.formFields,outline:e.showOutline,options:e.formOptions,field:e.fieldHash.timezone},on:{input:e.update},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}}),i("v-layout",[i("v-flex",[i("fluro-content-form-field",{attrs:{"form-fields":e.formFields,outline:e.showOutline,options:e.formOptions,field:e.fieldHash.deceased},on:{input:e.update},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})],1),i("v-flex",{directives:[{name:"show",rawName:"v-show",value:e.model.deceased,expression:"model.deceased"}]},[i("fluro-content-form-field",{attrs:{"form-fields":e.formFields,outline:e.showOutline,options:e.formOptions,field:e.fieldHash.deceasedDate},on:{input:e.update},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})],1)],1),e.model.data?i("div",[i("v-card",[i("v-card-text",[i("h5",[e._v("Explore Metadata")]),i("json-view",{attrs:{deep:3,data:e.model.data}})],1)],1)],1):e._e()],1)],1)],1)])],2):e._e()],2)],2)},o=[],n=i("b361"),s=n["a"],l=(i("b386"),i("2877")),r=i("6544"),m=i.n(r),d=i("8336"),c=i("b0af"),u=i("99d9"),f=i("a523"),p=i("0e8f"),h=i("b675"),v=i("24c9"),b=i("a722"),x=Object(l["a"])(s,a,o,!1,null,"2db27bd8",null);t["default"]=x.exports;m()(x,{VBtn:d["a"],VCard:c["a"],VCardText:u["b"],VContainer:f["a"],VFlex:p["a"],VInput:h["a"],VLabel:v["a"],VLayout:b["a"]})},"8e8f":function(e,t,i){"use strict";var a=i("5dc9"),o=i("ee8a"),n=i("cbec");t["a"]={props:{config:{type:Object,require:!0},context:{type:String,default:"new"}},data(){return{loading:!1}},extends:a["default"],components:{FluroContentForm:a["default"],FluroContentFormField:o["default"]},mixins:[n["a"]],computed:{itemID(){return this.model._id},definition(){return this.config.definition}},methods:{}}},b361:function(e,t,i){"use strict";(function(e){i("aef6");var a=i("795b"),o=i.n(a),n=(i("ac6a"),i("0e9a")),s=i("dd99"),l=i("8e8f"),r=i("60fc");t["a"]={props:{fields:{type:Array,default:function(){var t=this,i=[];o("firstName",{title:"First Name",minimum:1,maximum:1,type:"string",placeholder:"Eg. Jessica"}),o("preferredName",{title:"Preferred/Nick Name",minimum:0,maximum:1,type:"string",enabled:!1,placeholder:"Eg. 'Jess'"}),o("middleName",{title:"Middle Name",minimum:0,maximum:1,type:"string",enabled:!1,placeholder:"Eg. 'Heather'"}),o("ethnicName",{title:"Ethnic Name",minimum:0,maximum:1,type:"string",enabled:!1,placeholder:"Eg. '吳爾霏'"}),o("maidenName",{title:"Maiden Name",minimum:0,maximum:1,type:"string",enabled:!1,placeholder:"Eg. 'Johnson'"}),o("lastName",{title:"Last Name",minimum:1,maximum:1,type:"string",placeholder:"Eg. Michaels"}),o("dob",{title:"Date of Birth",minimum:0,maximum:1,type:"date",directive:"date-select"}),o("dobVerified",{title:"Birthday type",minimum:0,maximum:1,type:"boolean",directive:"select",defaultValues:[!1],options:[{name:"It's a Guess",value:!1},{name:"It's Correct",value:!0}]}),o("family",{title:"Household / Primary Residence",minimum:0,maximum:1,type:"reference",directive:"reference-select",params:{restrictType:"family"}}),o("householdRole",{title:"Household Role",minimum:0,maximum:1,type:"string",directive:"select",options:[{name:"None",value:""},{name:"Parent",value:"parent"},{name:"Child",value:"child"}],params:{restrictType:"family"}}),o("deceased",{title:"Mark as deceased",minimum:0,maximum:1,type:"boolean",directive:"checkbox"}),o("deceasedDate",{title:"Deceased Date",minimum:0,maximum:1,type:"date",directive:"date-select"});var a=e.map(t.$fluro.date.timezones(),function(e){return{name:e,value:e}});function o(e,t){t.key=e,i.push(t)}return a.unshift({name:"Use Account Default",value:""}),o("gender",{title:"Gender",minimum:1,maximum:1,type:"string",directive:"select",placeholder:"",options:[{name:"Male",value:"male"},{name:"Female",value:"female"},{name:"Unknown",value:"unknown"}]}),o("maritalStatus",{title:"Marital Status",minimum:0,maximum:1,type:"string",directive:"select",placeholder:"",options:[{name:"None",value:""},{name:"Single",value:"single"},{name:"In a relationship",value:"relationship"},{name:"Married",value:"married"},{name:"Widowed",value:"widowed"},{name:"Seperated",value:"seperated"},{name:"Divorced",value:"divorced"}]}),o("emails",{title:"Email Address",minimum:0,maximum:0,type:"email",placeholder:""}),o("phoneNumbers",{title:"Phone Number",minimum:0,maximum:0,type:"string",placeholder:"+61 400 123 456"}),o("timezone",{title:"Primary Timezone",minimum:0,maximum:1,type:"string",directive:"timezone-select",description:"Set a local timezone for this contact"}),o("countryCode",{title:"Default Country Code",minimum:0,maximum:1,type:"string",directive:"countrycodeselect"}),o("nametagNotes",{title:"Checkin Nametag Notes",minimum:0,maximum:1,type:"string"}),o("capabilities",{title:"Capabilities",minimum:0,maximum:0,type:"reference",description:"Add capabilities for this contact",params:{restrictType:"capability"}}),i}}},mixins:[l["a"]],components:{FluroAvatarUpdate:r["a"],FluroRealmSelect:s["a"],FluroAcademicSelect:n["a"]},methods:{communicate:function(e){var t=this;switch(e){case"vcard":var i=t.$fluro.access.getCurrentToken();window.open("".concat(t.$fluro.apiURL,"/contact/").concat(t.itemID,"/vcard.vcf?access_token=").concat(i),"_blank");break;case"phone":var a=t.model.international||t.model.phoneNumbers;t.$communications.call(a);break;case"email":t.$communications.email([t.model]);break;case"sms":t.$communications.sms([t.model]);break}},ping:function(e){var t=this;e.pinging=!0,t.$fluro.api.get("/push/ping/".concat(e._id),{cache:!1}).then(function(i){e.pinging=!1,t.$fluro.notify("Ping notification sent!")}).catch(function(i){e.pinging=!1,t.$fluro.error(i)})},resetDevices:function(){var e=this;e.$fluro.api.get("/push/clear/".concat(e.itemID),{cache:!1}).then(function(t){e.$fluro.notify("Devices Reset!"),console.log("Reset")}).catch(function(t){e.$fluro.error(t)})},toggleSubscription:function(e){var t=this;switch(e){case"sms":t.unsubscribedSMS?t.subscribe("sms"):t.unsubscribe("sms");break;case"mailout":t.unsubscribedMailout?t.subscribe("mailout"):t.unsubscribe("mailout");break}},subscribe:function(e){var t,i=this;switch(e){case"mailout":if(!i.emails||!i.emails.length)return void i.$fluro.error("No email addresses provided");t="/mailout/resubscribe";break;case"sms":if(!i.phoneNumbers||!i.phoneNumbers.length)return void i.$fluro.error("No phone numbers provided");t="/sms/resubscribe";break}i.$fluro.api.post(t,{phoneNumbers:i.phoneNumbers,emails:i.emails}).then(function(){i.subscriptionCacheKey=Math.random()})},unsubscribe:function(e){var t,i=this;switch(e){case"mailout":if(!i.emails||!i.emails.length)return void i.$fluro.error("No email addresses provided");t="/mailout/unsubscribe";break;case"sms":if(!i.phoneNumbers||!i.phoneNumbers.length)return void i.$fluro.error("No phone numbers provided");t="/sms/unsubscribe";break}i.$fluro.api.post(t,{phoneNumbers:i.phoneNumbers,emails:i.emails}).then(function(){i.subscriptionCacheKey=Math.random()})},updateAcademicCalendar:function(e){var t=this;t.$set(t.model,"academicCalendar",e),t.update(t.model)},updateAcademicGrade:function(e){var t=this;t.$set(t.model,"academicGrade",e),t.update(t.model)},updateFamily:function(){var t=this,i=e.chain(t.family).get("address").values().compact().value();i&&i.length?t.$set(t.model,"family",t.family):t.$delete(t.model,"family")},updateSheet:function(){var t=this,i=e.reduce(t.details,function(t,i,a){if(i){var o=e.chain(i.data).values().compact().value();o.length&&(t[a]=i)}return t},{});t.$set(t.model,"details",i),t.update(t.model)}},watch:{title:function(e){this.$set(this.model,"title",this.title),this.update(this.model)}},created:function(){var t=this;t.model.academicCalendar||t.$set(t.model,"academicCalendar",""),t.model.academicGrade||t.$set(t.model,"academicGrade",""),t.config&&t.config.details&&t.config.details.length&&(t.sheetDefinitions=e.reduce(t.config.details,function(i,a){if(!a.fields||!a.fields.length)return i;var o=a.definitionName,n={_id:a._id,title:a.title,type:"group",key:o,fields:a.fields,asObject:!0,minimum:1,maximum:1,askCount:1},s=e.get(t.model,"details.".concat(o)),l={realms:[],data:{}};if(s&&s.items&&s.items.length){var r=s.items[0];r.data||(r.data={}),r.realms||(r.realms=[]),l=r}return t.$set(t.details,o,l),a.field=n,i.push(a),i},[]),console.log("dETAILS",t.details))},asyncComputed:{contactDefinitions:{default:[],get:function(){var t=this;return new o.a(function(i,a){t.$fluro.types.subTypes("contact").then(function(t){t=e.chain(t).filter(function(e){return console.log("Contact Definition!",e),"active"==e.status}).map(function(e,t){return{_id:e._id,name:e.title,value:e.definitionName}}).value();i(t)}).catch(a)})}},devices:{default:[],get:function(){var t=this;return"edit"==t.context&&t.itemID?new o.a(function(i,a){t.$fluro.api.get("/contact/".concat(t.itemID,"/devices")).then(function(t){i(e.map(t.data,function(e){return e.pinging=!1,e}))}).catch(function(e){a(e)})}):o.a.resolve([])}},smsUnsubscribes:{default:[],get:function(){var e=this;return"edit"==e.context&&e.itemID?new o.a(function(t,i){e.$fluro.api.get("/contact/".concat(e.itemID,"/smsunsubscribes?").concat(e.subscriptionCacheKey)).then(function(e){t(e.data)}).catch(function(e){i(e)})}):o.a.resolve([])}},mailoutUnsubscribes:{default:[],get:function(){var e=this;return"edit"==e.context&&e.itemID?new o.a(function(t,i){e.$fluro.api.get("/contact/".concat(e.itemID,"/unsubscribes?").concat(e.subscriptionCacheKey)).then(function(e){t(e.data)}).catch(function(e){i(e)})}):o.a.resolve([])}}},computed:{canEmail:function(){return this.model.emails&&this.model.emails.length},canCall:function(){return this.model.phoneNumbers&&this.model.phoneNumbers.length},canSMS:function(){return this.model.phoneNumbers&&this.model.phoneNumbers.length},formOptions:function(){return{}},title:function(){return this.model?this.model.preferredName?"".concat(this.model.preferredName," ").concat(this.model.lastName||""):this.model.firstName?"".concat(this.model.firstName," ").concat(this.model.lastName||""):"":""},phoneNumbers:function(){return this.model.phoneNumbers},emails:function(){return this.model.emails},unsubscribedMailout:function(){return!!this.mailoutUnsubscribes.length},unsubscribedSMS:function(){return!!this.smsUnsubscribes.length},contextName:function(){var t=this.model.preferredName||this.model.firstName||"";return t&&t.length?e.endsWith(t,"s")?"".concat(t,"'"):"".concat(t,"'s"):""},definitionField:function(){var e=this;return{title:"Contact Type / Definition",minimum:0,maximum:1,type:"string",directive:"select",key:"definition",options:e.contactDefinitions}},showOutline:function(){return!1},showPreferredName:function(){return this.model.preferredName&&this.model.preferredName.length||this.show.preferredName},showEthnicName:function(){return this.model.ethnicName&&this.model.ethnicName.length||this.show.ethnicName},showMiddleName:function(){return this.model.middleName&&this.model.middleName.length||this.show.middleName},showMaidenName:function(){return this.model.maidenName&&this.model.maidenName.length||this.show.maidenName}},data:function(){return{subscriptionCacheKey:0,sheetDefinitions:[],details:{},family:{},show:{preferredName:!1,middleName:!1,ethnicName:!1,maidenName:!1},familyFields:[{title:"Name of household",key:"title",minimum:0,maximum:1,expressions:{defaultValue:"data.lastName"}},{title:"Address",key:"address",minimum:1,maximum:1,askCount:1,type:"group",asObject:!0,fields:[{title:"Street Address Line 1",key:"addressLine1",minimum:0,maximum:1},{title:"Address Line 2",key:"addressLine2",minimum:0,maximum:1,expressions:{hide:"!data.addressLine1.length"},className:"xs12 sm6"},{type:"group",minimum:1,askCount:1,maximum:1,sameLine:1,fields:[{title:"Suburb",key:"suburb",minimum:0,maximum:1,className:"xs12 sm4"},{title:"State",key:"state",minimum:0,maximum:1,className:"xs12 sm4"},{title:"Postal Code",key:"postalCode",minimum:0,maximum:1,className:"xs12 sm4"}]}]}]}}}}).call(this,i("2ef0"))},b386:function(e,t,i){"use strict";var a=i("41bb"),o=i.n(a);o.a}}]);
//# sourceMappingURL=chunk-6df27a49.1faaab5c.js.map