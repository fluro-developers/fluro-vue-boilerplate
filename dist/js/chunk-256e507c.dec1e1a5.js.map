{"version":3,"sources":["webpack:///./src/router/routes/Search.vue?a3fb","webpack:///./src/router/routes/Search.vue?60b2","webpack:///./src/router/routes/Search.vue","webpack:///src/router/routes/Search.vue","webpack:///./src/mixins/PagedMixin.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","keywords","_v","staticClass","_s","loaded","_e","attrs","indeterminate","row","wrap","_l","column","results","d-flex","xs12","sm4","_type","item","to","name","params","_id","slug","title","length","staticRenderFns","routes_Searchvue_type_script_lang_js_","Searchvue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__","installComponents_default","VFlex","VLayout","VProgressCircular","mixins","_mixins_SEOMixin__WEBPACK_IMPORTED_MODULE_3__","_mixins_PagedMixin__WEBPACK_IMPORTED_MODULE_2__","_mixins_UserMixin__WEBPACK_IMPORTED_MODULE_4__","fluro_vue_ui__WEBPACK_IMPORTED_MODULE_5__","props","type","String","components","pagedContent","data","limit","watch","created","search","methods","style","$selection","isSelected","background","clicked","$fluro","global","view","total","self","types","basicFields","promise","content","simple","select","allDefinitions","populateFields","populateSelect","statuses","searchInheritable","expanded","cache","then","_","chain","map","reduce","set","entry","definitionName","definition","existing","push","values","value","flatten","err","currentPage","Number","default","_Users_cadeembery_code_boilerplate_node_modules_babel_runtime_corejs2_core_js_parse_int__WEBPACK_IMPORTED_MODULE_1___default","$route","query","page","pageChanged","index","$router","_Users_cadeembery_code_boilerplate_node_modules_babel_runtime_corejs2_core_js_object_assign__WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"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","file":"js/chunk-256e507c.dec1e1a5.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('flex-column',[_c('flex-column-body',[_c('wrapper',[(_vm.keywords.length)?_c('constrain',[_c('h1',[_vm._v(\"Searching \"),_c('span',{staticClass:\"text-muted\"},[_vm._v(\"// \"+_vm._s(_vm.keywords))])]),(!_vm.loaded)?_c('div',[_c('v-progress-circular',{attrs:{\"indeterminate\":\"\"}}),_c('div',[_vm._v(\"Searching...\")])],1):_vm._e(),(_vm.loaded)?_c('div',[_c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\"}},_vm._l((_vm.results),function(column){return (column.results.length)?_c('v-flex',{attrs:{\"d-flex\":\"\",\"xs12\":\"\",\"sm4\":\"\"}},[_c('div',[_c('h3',[_vm._v(_vm._s(column._type))]),_vm._l((column.results),function(item){return _c('router-link',{attrs:{\"to\":{name:'view', params:{_id:item._id,slug:item.slug}}}},[_c('h4',[_vm._v(_vm._s(item.title))])])})],2)]):_vm._e()}),1)],1):_vm._e()]):_vm._e(),(!_vm.keywords.length)?_c('constrain',{staticClass:\"text-xs-center\"},[_c('h1',[_vm._v(\"Search\")]),_c('p',[_vm._v(\"Type some keywords to continue\")])]):_vm._e()],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Search.vue?vue&type=template&id=caf19ac8&\"\nimport script from \"./Search.vue?vue&type=script&lang=js&\"\nexport * from \"./Search.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!/Users/cadeembery/code/boilerplate/node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VFlex } from 'vuetify/lib'\nimport { VLayout } from 'vuetify/lib'\nimport { VProgressCircular } from 'vuetify/lib'\ninstallComponents(component, {VFlex,VLayout,VProgressCircular})\n","<template>\n    <flex-column>\n        <flex-column-body>\n            <wrapper>\n                <constrain v-if=\"keywords.length\">\n                    <h1>Searching <span class=\"text-muted\">// {{keywords}}</span></h1>\n                    <div v-if=\"!loaded\">\n                        <v-progress-circular indeterminate></v-progress-circular>\n                        <div>Searching...</div>\n                    </div>\n                    <div v-if=\"loaded\">\n                        <v-layout row wrap>\n                            <v-flex d-flex xs12 sm4 v-for=\"column in results\" v-if=\"column.results.length\">\n                                <div>\n                                    <h3>{{column._type}}</h3>\n\n                                    <router-link :to=\"{name:'view', params:{_id:item._id,slug:item.slug}}\" v-for=\"item in column.results\">\n                                        <!-- <pre>{{item}}</pre> -->\n                                        <h4>{{item.title}}</h4>\n                                    </router-link>\n                                </div>\n                            </v-flex>\n                            <!-- <pre>{{results}}</pre> -->\n                        </v-layout>\n                    </div>\n                </constrain>\n                <constrain class=\"text-xs-center\" v-if=\"!keywords.length\">\n                    <h1>Search</h1>\n                    <p>Type some keywords to continue</p>\n                </constrain>\n            </wrapper>\n        </flex-column-body>\n    </flex-column>\n</template>\n<script>\nimport PagedMixin from '@/mixins/PagedMixin';\nimport SEOMixin from '@/mixins/SEOMixin';\nimport UserMixin from '@/mixins/UserMixin';\nimport { Layout, FluroPagedContent } from 'fluro-vue-ui';\n\n\nexport default {\n    mixins: [SEOMixin, PagedMixin, UserMixin, Layout],\n    props: {\n        keywords: {\n            type: String,\n        },\n    },\n    components: {\n        pagedContent: FluroPagedContent,\n    },\n    data() {\n        return {\n            results: [],\n            loaded: false,\n            limit: 5,\n        }\n    },\n    watch: {\n        'keywords': 'search',\n    },\n    created() {\n\n        //Run the search straight away\n        this.search()\n    },\n    methods: {\n        style(item) {\n            if (this.$selection.isSelected(item)) {\n                return {\n                    background: 'yellow',\n                }\n            } else {\n                return {};\n            }\n        },\n        clicked(item) {\n            this.$fluro.global.view(item);\n            // this.$selection.toggle(item);\n        },\n        total() {\n            return this.results.length;\n        },\n        search() {\n\n            var self = this;\n            self.loaded = false;\n\n\n            var keywords = this.keywords;\n\n            //If there are no keywords\n            if (!keywords || !keywords.length) {\n                self.results = [];\n                self.loaded = true;\n                return;\n            }\n\n            ///////////////////////////////////////////////\n\n            var types = [\n                'product',\n                'purchase',\n                'collection',\n                'policy',\n                'query',\n                'family',\n                'persona',\n                'contact',\n                'contactdetail',\n                'event',\n                'team',\n                'realm',\n                'article',\n                'asset',\n                'image',\n                'video',\n                'audio',\n                'interaction',\n                'application',\n                'definition',\n            ]\n\n            var basicFields = 'name realms slug title definition width height module description color bgColor firstLine firstName lastName gender duration filesize _type startDate endDate status assetType external extension mimetype';\n\n            var promise = this.$fluro.content.search(keywords, {\n                limit: self.limit,\n                simple: true,\n                select: basicFields,\n                allDefinitions: true,\n                populateFields: 'realms',\n                populateSelect: 'color bgColor _discriminator _definition definition _discriminatorType title',\n                statuses: ['active', 'archived', 'draft'],\n                searchInheritable: true,\n                expanded: true,\n                types: types,\n                cache: false, //Request new results from the server every request\n            })\n\n            promise.then(function(results) {\n                // console.log('GOt the sturffff!', res);\n\n                self.results = _.chain(results)\n                    .map(function(column) {\n\n\n                        return _.chain(column.results)\n                            .reduce(function(set, entry) {\n\n                                //Get the entry definitionName\n                                var definitionName = entry.definition || column._type;\n\n                                var existing = set[definitionName];\n\n                                if (!existing) {\n                                    existing =\n                                        set[definitionName] = {\n                                            _type: definitionName,\n                                            results: [],\n                                            total: 0,\n                                        }\n                                }\n\n                                existing.results.push(entry);\n                                existing.total++;\n\n                                return set;\n\n                            }, {})\n                            .values()\n                            .value();\n                    })\n                    .flatten()\n                    .value();\n\n\n\n                self.loaded = true;\n\n            }, function(err) {\n                self.results = [];\n                self.loaded = true;\n            })\n        }\n    }\n}\n</script>\n<style>\n</style>","export default {\n\tprops:{\n\t\tcurrentPage:{\n\t\t\ttype:Number,\n\t\t\tdefault:function() {\n\t\t\t\treturn parseInt(this.$route.query.page) || 1;\n\t\t\t}\n\t\t}\n\t},\n    methods:{\n    \tpageChanged(index) {\n\n    \t\tthis.currentPage = index;\n    \t\t//Leave all of the current router parameters and query details\n    \t\t//and update the ?page= in the url\n            this.$router.push({ query: Object.assign({}, this.$route.query, { page: index }) });\n    \t}\n    }\n}"],"sourceRoot":""}