(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-767be818"],{"00c8":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("page",{attrs:{flex:""}},[a("flex-column",[a("flex-column-header",[a("page-header",{attrs:{type:"event"},scopedSlots:t._u([{key:"left",fn:function(){return[a("h3",[t._v("Events\n                        "),a("v-menu",{attrs:{fixed:!0,transition:"slide-y-transition","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[a("span",t._g({staticClass:"text-muted"},r),[t._v("\n                                    "+t._s(t.viewMode.title)+"\n                                    "),a("fluro-icon",{staticStyle:{"font-size":"0.7em"},attrs:{icon:"angle-down"}})],1)]}}])},[a("v-list",{attrs:{dense:""}},t._l(t.viewModes,function(e){return a("v-list-tile",{on:{click:function(a){t.viewMode=e}}},[a("v-list-tile-content",[t._v("\n                                        "+t._s(e.title)+"\n                                    ")]),a("fluro-icon",{attrs:{icon:e.icon,right:""}})],1)}),1)],1)],1)]},proxy:!0},{key:"right",fn:function(){return[!t.showFilters&&t.$vuetify.breakpoint.smAndUp?a("div",{staticClass:"search"},[a("v-menu",{attrs:{fixed:!0,right:!0,"close-on-content-click":!1,transition:"slide-y-transition","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[a("v-btn",t._g({attrs:{small:""}},r),[t._v("\n                                    "+t._s(t.readableDate)+"\n                                    "),a("fluro-icon",{attrs:{library:"far",icon:"angle-down",right:""}})],1)]}}],null,!1,3975190910)},[a("v-card",[a("v-layout",[a("v-flex",[a("v-card-text",[a("label",[t._v(" ")]),a("v-list",{attrs:{dense:""}},t._l(t.datePeriodOptions,function(e){return a("v-list-tile",{key:e.value,on:{click:function(a){return t.selectDatePeriod(e)}}},[t._v("\n                                                    "+t._s(e.title)+"\n                                                ")])}),1)],1)],1),a("v-flex",[a("v-card-text",{staticClass:"text-sm-center"},[a("label",[t._v("From Date")])]),a("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.startDateString,callback:function(e){t.startDateString=e},expression:"startDateString"}})],1),a("v-flex",[a("v-card-text",{staticClass:"text-sm-center"},[a("label",[t._v("To Date")])]),a("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.endDateString,callback:function(e){t.endDateString=e},expression:"endDateString"}})],1)],1)],1)],1)],1):t._e(),!t.showFilters&&t.$vuetify.breakpoint.smAndUp?a("div",{staticClass:"search",class:{active:t.searchFocussed||t.search.length}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],attrs:{placeholder:"Search by keyword"},domProps:{value:t.search},on:{focus:function(e){t.searchFocussed=!0},blur:function(e){t.searchFocussed=!1},input:function(e){e.target.composing||(t.search=e.target.value)}}}),a("div",{staticClass:"search-icon",on:{click:function(e){t.search=""}}},[t.search.length?a("fluro-icon",{attrs:{icon:"times"}}):a("fluro-icon",{attrs:{icon:"search"}})],1)]):t._e(),a("v-btn",{staticClass:"pa-2 mx-2",attrs:{color:"primary",small:""}},[a("span",[t._v("New")]),a("fluro-icon",{attrs:{right:"",icon:"plus"}})],1),a("v-btn",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"pa-2 mx-2",attrs:{content:"Show/Hide filters",small:""},on:{click:function(e){t.showFilters=!t.showFilters}}},[a("span",[t._v("Filters")]),t.showFilters?a("fluro-icon",{attrs:{right:"",icon:"times"}}):a("fluro-icon",{attrs:{right:"",icon:"filter"}})],1)]},proxy:!0},{key:"rightmobile",fn:function(){return[a("v-btn",{staticClass:"ma-0 mr-1",attrs:{small:"",color:"primary"}},[a("span",[t._v("New")]),a("fluro-icon",{attrs:{right:"",icon:"plus"}})],1),a("v-btn",{staticClass:"ma-0",attrs:{icon:""},on:{click:function(e){t.showFilters=!t.showFilters}}},[a("fluro-icon",{attrs:{icon:"filter",library:t.showFilters?"fas":"far"}})],1)]},proxy:!0}])})],1),a("flex-column-body",[a("v-layout",{attrs:{"fill-height":""}},[a("flex-column",{directives:[{name:"show",rawName:"v-show",value:t.$vuetify.breakpoint.smAndUp||!t.showFilters,expression:"$vuetify.breakpoint.smAndUp || !showFilters"}]},[a("fluro-data-table",{attrs:{clicked:t.selectEvent,grouping:t.groupByDate,includeArchivedByDefault:!0,defaultSort:"startDate",startDate:t.startDate,endDate:t.endDate,defaultSortType:"date","data-source":"content/event?allDefinitions=true",search:t.search,"init-page":t.$route.query.page,"filter-config":t.filterConfig,"init-sort":{sortKey:t.$route.query.sortKey,sortDirection:t.$route.query.sortDirection,sortType:t.$route.query.sortType},columns:t.columns},on:{raw:t.rowsChanged,page:t.pageChanged,sort:t.sortChanged}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showFilters,expression:"showFilters"}],staticClass:"filter-sidebar scroll-y"},[a("v-container",{attrs:{"pa-2":""}},[a("div",{staticClass:"search",class:{active:t.searchFocussed||t.search.length}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],attrs:{placeholder:"Keyword search"},domProps:{value:t.search},on:{focus:function(e){t.searchFocussed=!0},blur:function(e){t.searchFocussed=!1},input:function(e){e.target.composing||(t.search=e.target.value)}}}),a("div",{staticClass:"search-icon",on:{click:function(e){t.search=""}}},[t.search.length?a("fluro-icon",{attrs:{icon:"times"}}):a("fluro-icon",{attrs:{icon:"search"}})],1)])]),a("v-container",{attrs:{"pa-2":""}},[a("v-menu",{attrs:{fixed:!0,right:!0,"close-on-content-click":!1,transition:"slide-y-transition","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[a("label",[t._v("Between Dates")]),a("v-btn",t._g({attrs:{block:""}},r),[t._v("\n                                    "+t._s(t.readableDate)+"\n                                    "),a("fluro-icon",{attrs:{library:"far",icon:"angle-down",right:""}})],1)]}}])},[a("v-card",[a("v-layout",[a("v-flex",[a("v-card-text",[a("label",[t._v(" ")]),a("v-list",{attrs:{dense:""}},t._l(t.datePeriodOptions,function(e){return a("v-list-tile",{key:e.value,on:{click:function(a){return t.selectDatePeriod(e)}}},[t._v("\n                                                    "+t._s(e.title)+"\n                                                ")])}),1)],1)],1),a("v-flex",[a("v-card-text",{staticClass:"text-sm-center"},[a("label",[t._v("From Date")])]),a("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.startDateString,callback:function(e){t.startDateString=e},expression:"startDateString"}})],1),a("v-flex",[a("v-card-text",{staticClass:"text-sm-center"},[a("label",[t._v("To Date")])]),a("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.endDateString,callback:function(e){t.endDateString=e},expression:"endDateString"}})],1)],1)],1)],1)],1),a("v-container",{attrs:{"py-2":"","px-0":""}},[a("v-container",{attrs:{"px-2":"","py-0":""}},[a("label",[t._v("Advanced Filters")])]),a("filter-condition-group",{attrs:{rows:t.rows,mini:!0,type:"event",debounce:t.filterDebounce},model:{value:t.filterConfig,callback:function(e){t.filterConfig=e},expression:"filterConfig"}})],1)],1)],1)],1)],1)],1)},n=[],i=(a("ac6a"),a("f499")),s=a.n(i),o=a("5176"),l=a.n(o),c=(a("a481"),a("cadf"),a("551c"),a("097d"),a("a026")),u=a("2ef0"),d=a.n(u),f=a("c1df"),v=a.n(f),h=a("f217"),p=(a("baef"),a("6cd4")),m=(a("a00b"),a("1688")),D=a("22de"),g=a("f811"),w=a("d4f3"),b={operator:"and",filters:[]},y=c["default"].extend({props:{row:{type:Object},column:{type:Object},data:{}},template:'<div><fluro-realm-dots v-if="$vuetify.breakpoint.smAndUp" :realms="data"/><fluro-realm-bar v-if="$vuetify.breakpoint.xsOnly" :realm="data"/></div>'}),x=(c["default"].extend({props:{row:{type:Object},column:{type:Object},data:{}},template:"<div>{{row | readableEventDate('day')}}</div>"}),c["default"].extend({props:{row:{type:Object},column:{type:Object},data:{}},template:"<div>{{row | readableEventTime}}</div>"})),k=c["default"].extend({props:{row:{type:Object},column:{type:Object},data:{}},template:'\n    <div>\n        <strong>{{row.title}}</strong>\n        <div>\n            <em class="text-muted small">{{row | readableEventDate}}</em><em v-if="row.firstLine" class="text-muted small"> - {{row.firstLine}}</em> \n            <div v-if="row.rooms && row.rooms.length"  class="text-muted small" ><strong>Rooms:</strong> <em>{{row.rooms | comma(\'title\')}}</em></div>\n        </div>\n\n       \n    </div>'}),_=c["default"].extend({props:{row:{type:Object},column:{type:Object},data:{}},template:"\n    <div>\n        {{data | definitionTitle}}       \n    </div>"}),C=(c["default"].extend({props:{row:{type:Object},column:{type:Object},data:{}},template:'\n     <div v-if="data"><em class="text-muted small" >{{data}}</em></div>\n    '}),{props:{defaultView:{type:String,default:"list"}},components:{FluroDataTable:D["a"],FilterConditionGroup:g["default"]},mounted:function(){},mixins:[h["a"],p["a"],m["i"]],data:function(){var t=[],e=new Date;t.push({title:"Today",startDate:e,endDate:e}),t.push({title:"This Week",startDate:e,endDate:v()().add(1,"weeks").toDate()}),t.push({title:"Last Week",startDate:v()().subtract(1,"weeks").toDate(),endDate:e}),t.push({title:"Next 4 weeks",startDate:e,endDate:v()().add(4,"weeks").toDate()}),t.push({title:"Last 4 weeks",startDate:v()().subtract(4,"weeks").toDate(),endDate:e}),t.push({title:"Past 12 months",startDate:v()().subtract(12,"months").toDate(),endDate:e});var a={startDate:e,endDate:v()().add(3,"months").toDate()},r=[{title:"List",value:"default",icon:"bars"}],n=b;return this.$route.query.filter&&this.$route.query.filter.length&&(n=JSON.parse(this.$route.query.filter)),{rawStartDate:a.startDate,rawEndDate:a.endDate,search:"",searchFocussed:!1,selection:this.$selection,viewModes:r,viewMode:r[0],showFilters:!1,datePeriodOptions:t,rows:[],filterConfig:n,columns:[{title:"",sortable:!1,shrink:!0,align:"center",key:"realms",renderer:y},{title:"Time",shrink:!0,sortable:!1,key:"startDate",renderer:x,additionalFields:["endDate"]},{title:"Title",sortable:!1,key:"title",renderer:k,additionalFields:["firstLine","status"]},{title:"Definition",sortable:!1,key:"definition",renderer:_},{title:"Location",sortable:!1,key:"locations",additionalFields:["rooms"]},{title:"Rooms",sortable:!1,key:"rooms"}]}},watch:{filterChangeString:function(){console.log("Filters changed",this.filterConfig),this.$router.replace({query:l()({},this.$route.query,{filter:s()(this.filterConfig)})})}},created:function(){},computed:{activeViewMode:function(){var t=this;return t.viewMode&&t.viewMode.value?t.viewMode.value:"default"},columnKeys:function(){return d.a.map(this.columns,"key")},filterDebounce:function(){return this.$vuetify.breakpoint.smAndDown?1500:700},filterChangeString:function(){return w["a"].getFilterChangeString(this.filterConfig)},readableDate:function(){return this.$fluro.date.readableEventDate({startDate:this.startDate,endDate:this.endDate},"day")},readableStartDate:function(){return this.$fluro.date.formatDate(this.startDate)},readableEndDate:function(){return this.$fluro.date.formatDate(this.endDate)},startDate:{get:function(){return this.rawStartDate},set:function(t){var e=new Date(t);return this.rawEndDate<e&&(this.rawEndDate=new Date(e)),this.rawStartDate=new Date(t)}},endDate:{get:function(){return this.rawEndDate},set:function(t){var e=new Date(t);return this.rawStartDate>e&&(this.rawStartDate=new Date(e)),this.rawEndDate=new Date(t)}},startDateString:{get:function(){return this.stringDate(this.startDate)},set:function(t){return this.startDate=new Date(t)}},endDateString:{get:function(){return this.stringDate(this.endDate)},set:function(t){return this.endDate=new Date(t)}}},methods:{selectDatePeriod:function(t){this.startDate=new Date(t.startDate),this.endDate=new Date(t.endDate)},groupByDate:function(t){return d.a.chain(t).reduce(function(t,e,a){var r="ddd D MMM",n=new v.a(e.startDate);v()().format("YYYY")!=n.format("YYYY")&&(r="ddd D MMM YYYY");var i=n.format(r),s=t[i];return s||(s=t[i]={title:i,items:[],index:a}),s.items.push(e),t},{}).values().orderBy("index").value()},selectEvent:function(t){t._type="event",this.$fluro.global.view(t)},rowsChanged:function(t){this.rows=t},pageChanged:function(t){this.$router.push({query:l()({},this.$route.query,{page:t})})},sortChanged:function(t){this.$router.replace({query:l()({},this.$route.query,t)})},stringDate:function(t){var e=this.$fluro.date.formatDate(t,"YYYY-MM-DD");return e}}}),S=C,F=(a("72b2"),a("983f"),a("2877")),$=a("6544"),M=a.n($),O=a("8336"),E=a("b0af"),Y=a("99d9"),T=a("a523"),j=a("2e4b"),q=a("0e8f"),L=a("a722"),V=a("8860"),P=a("ba95"),N=a("5d23"),A=a("e449"),B=Object(F["a"])(S,r,n,!1,null,"745a3401",null);e["default"]=B.exports;M()(B,{VBtn:O["a"],VCard:E["a"],VCardText:Y["b"],VContainer:T["a"],VDatePicker:j["a"],VFlex:q["a"],VLayout:L["a"],VList:V["a"],VListTile:P["a"],VListTileContent:N["a"],VMenu:A["a"]})},5238:function(t,e,a){},"72b2":function(t,e,a){"use strict";var r=a("5238"),n=a.n(r);n.a},"983f":function(t,e,a){"use strict";var r=a("d4ab"),n=a.n(r);n.a},baef:function(t,e,a){"use strict";e["a"]={beforeRouteEnter:function(t,e,a){return console.log("Entering route",t),a()},beforeRouteUpdate:function(t,e,a){return console.log("route update"),a()},beforeRouteLeave:function(t,e,a){return console.log("Leaving route",e),a()}}},d4ab:function(t,e,a){}}]);
//# sourceMappingURL=chunk-767be818.e890dea9.js.map