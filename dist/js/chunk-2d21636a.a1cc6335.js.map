{"version":3,"sources":["webpack:///./src/router/routes/UserLogin.vue?9d04","webpack:///src/router/routes/UserLogin.vue","webpack:///./src/router/routes/UserLogin.vue?1db8","webpack:///./src/router/routes/UserLogin.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","center","staticStyle","min-width","xs","staticClass","_v","on","submit","$event","preventDefault","ref","error-messages","emailErrors","label","required","blur","$v","email","$touch","model","value","callback","$$v","expression","passwordErrors","type","showPassword","append-icon","input","password","click:append","block","large","disabled","$invalid","loading","color","to","name","_e","flat","staticRenderFns","UserLoginvue_type_script_lang_js_","mixins","SEOMixin","UserMixin","src","lib","validations","validators","data","mounted","length","$refs","focus","methods","self","applicationContext","application","authenticationStyle","loginSuccess","res","user","console","log","$fluro","notify","concat","firstName","duration","router_history","intendedPath","$router","replace","loginFail","err","message","utils","errorMessage","$toasted","show","auth","login","username","bypassInterceptor","then","computed","signupEnabled","set","$store","commit","get","getters","errors","$dirty","push","routes_UserLoginvue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__","installComponents_default","VBtn","VContainer","VTextField"],"mappings":"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","file":"js/chunk-2d21636a.a1cc6335.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('page',{attrs:{\"center\":\"\"}},[_c('v-container',{staticStyle:{\"min-width\":\"320px\"}},[_c('wrapper',[_c('constrain',{attrs:{\"xs\":\"\"}},[_c('div',{staticClass:\"login-logo\"},[_c('div',[_c('h2',[_vm._v(\"Sign In\")])])]),_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.submit($event)}}},[_c('v-text-field',{ref:\"email\",attrs:{\"error-messages\":_vm.emailErrors,\"label\":\"Email Address\",\"required\":\"\"},on:{\"blur\":function($event){return _vm.$v.email.$touch()}},model:{value:(_vm.email),callback:function ($$v) {_vm.email=$$v},expression:\"email\"}}),_c('v-text-field',{ref:\"password\",attrs:{\"error-messages\":_vm.passwordErrors,\"label\":\"Password\",\"required\":\"\",\"type\":_vm.showPassword ? 'text' : 'password',\"append-icon\":_vm.showPassword ? 'visibility' : 'visibility_off'},on:{\"input\":function($event){return _vm.$v.password.$touch()},\"blur\":function($event){return _vm.$v.password.$touch()},\"click:append\":function($event){_vm.showPassword = !_vm.showPassword}},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}}),_c('v-btn',{attrs:{\"block\":\"\",\"large\":\"\",\"disabled\":_vm.$v.$invalid,\"loading\":_vm.loading,\"color\":\"primary\",\"type\":\"submit\"}},[_vm._v(\"Sign In\")]),(_vm.signupEnabled)?[_c('v-btn',{attrs:{\"block\":\"\",\"to\":{name:'user.signup'},\"large\":\"\",\"color\":\"light\"}},[_vm._v(\"Create New Account\")])]:_vm._e(),_c('v-btn',{attrs:{\"block\":\"\",\"to\":{name:'user.forgot'},\"large\":\"\",\"flat\":\"\"}},[_vm._v(\"Forgot Password?\")])],2)])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <page center>\n        <v-container style=\"min-width:320px;\">\n            <wrapper>\n                <constrain xs>\n                    <div class=\"login-logo\">\n                        <div>\n                            <h2>Sign In</h2>\n                            <!-- <p class=\"text-muted small\">Please log in to continue</p> -->\n                        </div>\n                    </div>\n                    <form @submit.prevent=\"submit\">\n                        <v-text-field ref=\"email\" v-model=\"email\" :error-messages=\"emailErrors\" label=\"Email Address\" required @blur=\"$v.email.$touch()\"></v-text-field>\n                        <v-text-field ref=\"password\" v-model=\"password\" :error-messages=\"passwordErrors\" label=\"Password\" required @input=\"$v.password.$touch()\" @blur=\"$v.password.$touch()\" :type=\"showPassword ? 'text' : 'password'\" :append-icon=\"showPassword ? 'visibility' : 'visibility_off'\" @click:append=\"showPassword = !showPassword\"></v-text-field>\n                        <!--  -->\n                        <v-btn block large :disabled=\"$v.$invalid\" :loading=\"loading\" color=\"primary\" type=\"submit\">Sign In</v-btn>\n                        <template v-if=\"signupEnabled\">\n                            <v-btn block :to=\"{name:'user.signup'}\" large color=\"light\">Create New Account</v-btn>\n                        </template>\n                        <v-btn block :to=\"{name:'user.forgot'}\" large flat>Forgot Password?</v-btn>\n                    </form>\n                </constrain>\n            </wrapper>\n        </v-container>\n    </page>\n</template>\n<script>\nimport _ from 'lodash';\n\nimport SEOMixin from '@/mixins/SEOMixin';\nimport UserMixin from '@/mixins/UserMixin';\nimport { validationMixin } from 'vuelidate';\nimport { required, maxLength, email } from 'vuelidate/lib/validators';\nimport { Layout } from 'fluro-vue-ui';\nimport RouterHistory from '@/router/history';\n\n\n\nexport default {\n    mixins: [SEOMixin, UserMixin, Layout, validationMixin],\n    validations: {\n        email: { required, email },\n        password: { required },\n    },\n    data() {\n        return {\n            loading: false,\n            password: '',\n            showPassword: false,\n        }\n    },\n    mounted() {\n\n        //If they haven't typed an email in\n        if (!this.email || !this.email.length) {\n            this.$refs.email.focus()\n        } else {\n            this.$refs.password.focus()\n        }\n    },\n    methods: {\n        submit() {\n            var instance = this;\n            var self = this;\n\n            //Check if there is an application\n            var applicationContext = (self.application && self.application.authenticationStyle == 'application');\n\n            self.loading = true;\n\n\n            self.$fluro.auth.login({\n                    username: self.email,\n                    password: self.password,\n                }, {\n                    bypassInterceptor: true,\n                    application: applicationContext, //Sign in to the application rather than Fluro\n                })\n                .then(loginSuccess, loginFail);\n\n            //////////////////////////////////\n\n            function loginSuccess(res) {\n\n                self.password = '';\n                var user = res.data;\n                console.log('Login success', user);\n                // instance.$store.commit('user', res.data);\n\n                // self.$toasted.show(`Welcome back ${user.firstName}!`, {\n                //     // icon:'check'\n                //     duration: 3500,\n                //     type: 'success',\n                // })\n\n                self.$fluro.notify(`Welcome back ${user.firstName}!`, {\n                    // icon:'check'\n                    duration: 3500,\n                    type: 'success',\n                })\n\n\n\n                // console.log('Back to RouterHistory', RouterHistory);\n                // if (RouterHistory.trail.length > 1) {\n\n                //     self.$router.go(-1)\n                //     // return RouterHistory.trail.length > 1;\n                // } else {\n                //Go to the home page\n\n\n\n                if (RouterHistory.intendedPath) {\n                    console.log('Go to intended path', RouterHistory.intendedPath)\n                    self.$router.replace(RouterHistory.intendedPath);\n                    RouterHistory.intendedPath = null;\n                } else {\n                    self.$router.replace({ name: 'home' });\n                }\n\n                self.loading = false;\n                // }\n            }\n\n            //////////////////////////////////\n\n            function loginFail(err) {\n\n\n                var message = self.$fluro.utils.errorMessage(err);\n\n                console.log('ERROR!', message, err);\n\n                self.$toasted.show(message, {\n                    // icon:'check'\n                    duration: 3500,\n                    type: 'error',\n                })\n\n\n                self.loading = false;\n                // instance.$store.dispatch('logout');\n            }\n\n\n        },\n    },\n    computed: {\n\n        signupEnabled() {\n\n            //Check if this app is setup as a Fluro global application or a whitelabelled application\n            var applicationContext = (this.application && this.application.authenticationStyle == 'application');\n\n            //If we are an application, then signup should be enabled\n            //so users can sign up as a managed persona and authenticate with your app\n            return applicationContext;\n        },\n        email: {\n            set(email) {\n                this.$store.commit('email', email);\n            },\n            get(email) {\n                return this.$store.getters.email;\n            }\n        },\n        emailErrors() {\n            const errors = []\n\n            if (!this.$v.email.$dirty) {\n                return errors;\n            }\n\n            if (!this.$v.email.email) {\n                errors.push('Must be valid email address')\n            }\n\n            if (!this.$v.email.required) {\n                errors.push('Email is required')\n            }\n\n            return errors;\n        },\n        passwordErrors() {\n\n            const errors = []\n\n            if (!this.$v.password.$dirty) {\n                return errors;\n            }\n\n            if (!this.$v.password.required) {\n                errors.push('Please type your password')\n            }\n            return errors;\n\n        },\n    },\n}\n</script>\n<style>\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserLogin.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserLogin.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserLogin.vue?vue&type=template&id=6afbbb6a&\"\nimport script from \"./UserLogin.vue?vue&type=script&lang=js&\"\nexport * from \"./UserLogin.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!/Users/cadeembery/code/boilerplate/node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib'\nimport { VContainer } from 'vuetify/lib'\nimport { VTextField } from 'vuetify/lib'\ninstallComponents(component, {VBtn,VContainer,VTextField})\n"],"sourceRoot":""}