(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e6b06f20"],{"11e9":function(t,e,i){var n=i("52a7"),o=i("4630"),r=i("6821"),a=i("6a99"),c=i("69a8"),s=i("c69a"),u=Object.getOwnPropertyDescriptor;e.f=i("9e1e")?u:function(t,e){if(t=r(t),e=a(e,!0),s)try{return u(t,e)}catch(i){}if(c(t,e))return o(!n.f.call(t,e),t[e])}},"52a7":function(t,e){e.f={}.propertyIsEnumerable},"5dbc":function(t,e,i){var n=i("d3f4"),o=i("8b97").set;t.exports=function(t,e,i){var r,a=e.constructor;return a!==i&&"function"==typeof a&&(r=a.prototype)!==i.prototype&&n(r)&&o&&o(t,r),t}},"86a8":function(t,e,i){"use strict";(function(t){i("a481"),i("20d6");e["a"]={methods:{view:function(t){var e=this.$fluro.utils.getStringID(t);this.$router.push({query:{photo:e}})},previousPhoto:function(e){var i=this,n=i.sorted||[],o=t.findIndex(n,{_id:e}),r=o;r-=1,r<0&&(r=n.length-1);var a=n[r];if(console.log("PREVIOUS",e,o,r,a,n),a){var c=i.$fluro.utils.getStringID(a);i.$router.replace({query:{photo:c}})}},nextPhoto:function(e){var i=this,n=i.sorted||[],o=t.findIndex(n,{_id:e}),r=o;r+=1,r>n.length-1&&(r=0),console.log("NEXT",e,o,r,n);var a=n[r];if(a){var c=i.$fluro.utils.getStringID(a);i.$router.replace({query:{photo:c}})}}},activated:function(){console.log("PHOTO ACTIVATED");var t=this;t.$fluro.addEventListener("previousPhoto",t.previousPhoto),t.$fluro.addEventListener("nextPhoto",t.nextPhoto)},deactivated:function(){console.log("PHOTO DEACTIVATED");var t=this;t.$fluro.removeEventListener("previousPhoto",t.previousPhoto),t.$fluro.removeEventListener("nextPhoto",t.nextPhoto)}}}).call(this,i("2ef0"))},"8b97":function(t,e,i){var n=i("d3f4"),o=i("cb7c"),r=function(t,e){if(o(t),!n(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{n=i("9b43")(Function.call,i("11e9").f(Object.prototype,"__proto__").set,2),n(t,[]),e=!(t instanceof Array)}catch(o){e=!0}return function(t,i){return r(t,i),e?t.__proto__=i:n(t,i),t}}({},!1):void 0),check:r}},9093:function(t,e,i){var n=i("ce10"),o=i("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,o)}},aa77:function(t,e,i){var n=i("5ca1"),o=i("be13"),r=i("79e5"),a=i("fdef"),c="["+a+"]",s="​",u=RegExp("^"+c+c+"*"),l=RegExp(c+c+"*$"),f=function(t,e,i){var o={},c=r(function(){return!!a[t]()||s[t]()!=s}),u=o[t]=c?e(h):a[t];i&&(o[i]=u),n(n.P+n.F*c,"String",o)},h=f.trim=function(t,e){return t=String(o(t)),1&e&&(t=t.replace(u,"")),2&e&&(t=t.replace(l,"")),t};t.exports=f},bf5e:function(t,e,i){"use strict";var n=i("c3df"),o=i.n(n);o.a},c3df:function(t,e,i){},c5f6:function(t,e,i){"use strict";var n=i("7726"),o=i("69a8"),r=i("2d95"),a=i("5dbc"),c=i("6a99"),s=i("79e5"),u=i("9093").f,l=i("11e9").f,f=i("86cc").f,h=i("aa77").trim,d="Number",p=n[d],g=p,m=p.prototype,v=r(i("2aeb")(m))==d,b="trim"in String.prototype,_=function(t){var e=c(t,!1);if("string"==typeof e&&e.length>2){e=b?e.trim():h(e,3);var i,n,o,r=e.charCodeAt(0);if(43===r||45===r){if(i=e.charCodeAt(2),88===i||120===i)return NaN}else if(48===r){switch(e.charCodeAt(1)){case 66:case 98:n=2,o=49;break;case 79:case 111:n=8,o=55;break;default:return+e}for(var a,s=e.slice(2),u=0,l=s.length;u<l;u++)if(a=s.charCodeAt(u),a<48||a>o)return NaN;return parseInt(s,n)}}return+e};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(t){var e=arguments.length<1?0:t,i=this;return i instanceof p&&(v?s(function(){m.valueOf.call(i)}):r(i)!=d)?a(new g(_(e)),i,p):_(e)};for(var y,w=i("9e1e")?u(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),I=0;w.length>I;I++)o(g,y=w[I])&&!o(p,y)&&f(p,y,l(g,y));p.prototype=m,m.constructor=p,i("2aba")(n,d,p)}},cb5a:function(t,e,i){},d6f0:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("flex-column",[i("flex-column-header",[i("page-header",{attrs:{icon:"clock"},scopedSlots:t._u([{key:"left",fn:function(){return[i("h3",[t._v("Photos "),i("span",{staticClass:"text-muted"},[t._v("Latest")])])]},proxy:!0},{key:"right",fn:function(){},proxy:!0},{key:"rightmobile",fn:function(){},proxy:!0}])})],1),t.loading?i("fluro-page-preloader",{attrs:{contain:""}}):[i("flex-column-body",{attrs:{"scroll-parent":""}},[i("fluro-infinite-scroll",{attrs:{perPage:11,startPage:4,items:t.sorted},scopedSlots:t._u([{key:"default",fn:function(e){return[i("masonry",t._l(e.page,function(e){return i("brick",{attrs:{portrait:e.height>e.width}},[i("v-flex",{staticStyle:{padding:"2px",height:"100%",width:"100%"},attrs:{"d-flex":""},on:{click:function(i){return t.view(e)}}},[i("photo-thumbnail",{staticStyle:{width:"100%",height:"100%"},attrs:{image:e}})],1)],1)}),1)]}}])})],1)]],2)},o=[],r=i("795b"),a=i.n(r),c=(i("7f7f"),i("28a5"),i("cadf"),i("551c"),i("097d"),i("dcf6")),s=i("1688"),u=i("a00b"),l=i("86a8"),f={mixins:[u["a"],l["a"]],components:{FluroInfiniteScroll:s["e"],PhotoThumbnail:c["a"]},data:function(){return{loading:!0}},computed:{routeKey:function(){return this.$route.name.split(".")[0]}},asyncComputed:{sorted:{default:[],get:function(){var t=this;return t.loading=!0,new a.a(function(e,i){t.$fluro.api.get("/content/photo",{params:{sort:"-created",fields:["title","managedAuthor","created","data.photographer","data.event","width","colors","height"],limit:1e3}}).then(function(i){e(i.data),t.loading=!1},function(e){i(e),t.loading=!1})})}}}},h=f,d=(i("bf5e"),i("2877")),p=i("6544"),g=i.n(p),m=i("0e8f"),v=Object(d["a"])(h,n,o,!1,null,null,null);e["default"]=v.exports;g()(v,{VFlex:m["a"]})},db3a:function(t,e,i){"use strict";var n=i("cb5a"),o=i.n(n);o.a},dcf6:function(t,e,i){"use strict";var n=function(){var t,e=this,i=e.$createElement,n=e._self._c||i;return n("div",{staticClass:"photo-thumbnail",class:e.classes,style:e.style},[n("div",{staticClass:"thumb-top"},[n("div",{staticClass:"thumb-left"},[e._v("\n            \n                "+e._s(e.title)+"\n                "),n("div",{staticClass:"small text-muted"},[e._v(e._s(e.date))])]),n("div",{staticClass:"thumb-right"},[n("v-btn",{attrs:{dark:"",icon:"",color:e.selected?"primary":""},on:{click:function(t){return t.stopPropagation(),e.toggleSelection()}}},[n("font-awesome-icon",{attrs:{icon:e.selectionIcon}})],1)],1)]),n("fluro-image",{attrs:{cover:"",spinner:!0,imageWidth:e.imageWidth,imageHeight:e.imageHeight,width:e.width,height:e.height,item:e.image},on:{load:e.onLoad,error:e.onError}}),n("div",{staticClass:"shader"}),n("div",{staticClass:"thumb-bottom"},[n("div",{staticClass:"thumb-left"},[e.photographer?[n("a",{on:{click:function(t){return t.stopPropagation(),e.viewPhotographer()}}},[n("fluro-avatar",{attrs:{id:e.photographer._id,left:"",type:e.photographer.style}})],1),e._v("\n                    "+e._s(e.photographer.title)+"\n                ")]:e._e()],2),n("div",{staticClass:"thumb-right"},[n("v-btn",{attrs:{dark:"",icon:""},on:{click:function(t){return t.stopPropagation(),e.download()}}},[n("font-awesome-icon",{attrs:{icon:["fas","cloud-download"]}})],1),e.user?n("v-btn",{attrs:{dark:"",icon:""},on:{click:function(t){return t.stopPropagation(),e.togglePin()}}},[n("font-awesome-icon",e._b({attrs:{icon:e.pinIcon}},"font-awesome-icon",(t={},t["spin"]=e.pinning,t),!1))],1):e._e()],1)])],1)},o=[],r=(i("c5f6"),i("cadf"),i("551c"),i("097d"),i("2ef0")),a=i.n(r),c=i("bf89"),s={props:{image:{type:Object},width:{type:Number},height:{type:Number},defaultColor:{type:String,default:"#ebeef0"}},mixins:[c["a"]],data:function(){return{loading:!0}},computed:{selectionIcon:function(){return this.selected?["fas","check"]:["far","square"]},calculatedWidth:function(){var t=this;return t.width?t.width:320},calculatedHeight:function(){var t=this;return t.aspectRatio?t.calculatedWidth*t.aspectRatio:t.height?t.height:t.calculatedWidth},imageWidth:function(){return this.calculatedWidth?this.calculatedWidth:320},imageHeight:function(){return this.calculatedHeight?this.calculatedHeight:320},classes:function(){var t=[];return this.selected&&t.push("selected"),t},selected:function(){return this.$selection.isSelected(this.image)},itemID:function(){return this.$fluro.utils.getStringID(this.image)},style:function(){return{backgroundColor:a.a.get(this.image,"colors[0]")||this.defaultColor}},title:function(){return a.a.get(this.image,"data.event.title")||a.a.get(this,"image.title")},date:function(){var t=a.a.get(this,"image.created");if(t)return this.$filters.formatDate(t,"D MMM YYYY")},photographer:function(){var t=this.image,e=a.a.get(t,"data.photographer"),i=a.a.get(t,"managedAuthor");return e&&e.title?{_id:e._id,style:"contact",title:e.title}:i&&i.title?{_id:i._id,style:"persona",title:i.title}:void 0},smallUrl:function(){return this.$fluro.asset.imageUrl(this.image,50)},url:function(){return this.$fluro.asset.imageUrl(this.image,320)},aspectRatio:function(){var t=this.image;if(t)return t.height/t.width}},methods:{toggleSelection:function(){var t={title:this.image.title,_id:this.image._id,definition:"photo",_type:"image"};this.$selection.toggle(t)},viewPhotographer:function(){var t=this.photographer._id;"contact"==this.photographer.style&&this.$router.push({name:"photographer",params:{id:t}})},download:function(){if(this.image){var t=this.$fluro.asset.downloadUrl(this.image,{filename:this.image.filename});window.open(t)}},onLoad:function(){this.loading=!1},onError:function(){this.loading=!1}}},u=s,l=(i("db3a"),i("2877")),f=i("6544"),h=i.n(f),d=i("8336"),p=Object(l["a"])(u,n,o,!1,null,"a6740bc2",null);e["a"]=p.exports;h()(p,{VBtn:d["a"]})},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=chunk-e6b06f20.57105faa.js.map