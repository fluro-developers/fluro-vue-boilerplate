(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21a958"],{bbac:function(e,r,a){"use strict";a.r(r);var t=function(){var e=this,r=e.$createElement,a=e._self._c||r;return a("v-container",[a("wrapper",[e.loading?a("constrain",{staticClass:"text-xs-center",attrs:{xs:""}},[a("p",{staticClass:"lead"},[e._v("Processing...")]),a("v-progress-circular",{attrs:{indeterminate:""}})],1):e._e(),e.loading?e._e():a("constrain",{attrs:{sm:""}},[a("h1",[e._v("Update your details")]),a("p",[e._v("Hi "+e._s(e.details.firstName)+", you can update your password and details below")]),a("form",{on:{submit:function(r){return r.preventDefault(),e.submit(r)}}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{"pr-4":"","d-flex":"","align-center":"",xs12:"",sm6:""}},[a("v-text-field",{attrs:{outline:"","error-messages":e.firstNameErrors,required:"",label:"First Name"},on:{blur:function(r){return e.$v.firstName.$touch()}},model:{value:e.firstName,callback:function(r){e.firstName=r},expression:"firstName"}})],1),a("v-flex",{attrs:{"d-flex":"","align-center":"",xs12:"",sm6:""}},[a("v-text-field",{attrs:{outline:"","error-messages":e.lastNameErrors,required:"",label:"Last Name"},on:{blur:function(r){return e.$v.lastName.$touch()}},model:{value:e.lastName,callback:function(r){e.lastName=r},expression:"lastName"}})],1)],1),a("v-text-field",{attrs:{outline:"",type:"password","error-messages":e.passwordErrors,label:"Set a new password",required:""},on:{input:function(r){return e.$v.password.$touch()},blur:function(r){return e.$v.password.$touch()}},model:{value:e.password,callback:function(r){e.password=r},expression:"password"}}),a("v-text-field",{attrs:{outline:"",type:"password","error-messages":e.confirmErrors,label:"Confirm your new password",required:""},on:{input:function(r){return e.$v.confirmPassword.$touch()},blur:function(r){return e.$v.confirmPassword.$touch()}},model:{value:e.confirmPassword,callback:function(r){e.confirmPassword=r},expression:"confirmPassword"}}),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{"d-flex":"","align-center":"",xs12:"",sm5:""}},[a("v-btn",{attrs:{block:"",large:"",color:"primary",disabled:e.$v.$invalid,type:"submit"}},[e._v("Save changes")])],1)],1)],1)])],1)],1)},s=[],i=(a("a481"),a("2ef0"),a("f217")),o=a("6cd4"),n=a("1dce"),l=a("b5ae"),u=a("77ed"),d={props:["token"],validations:{firstName:{required:l["required"],minLength:Object(l["minLength"])(3)},lastName:{required:l["required"],minLength:Object(l["minLength"])(4)},email:{required:l["required"],email:l["email"]},password:{required:l["required"],minLength:Object(l["minLength"])(6)},confirmPassword:{required:l["required"],minLength:Object(l["minLength"])(6),isMatch:function(){return this.$v.password.$model==this.$v.confirmPassword.$model}}},mixins:[i["a"],n["validationMixin"],o["a"],u["d"]],data:function(){return{details:null,loading:!0,firstName:"",lastName:"",email:"",password:"",confirmPassword:""}},created:function(){var e=this,r=this.application&&"application"==this.application.authenticationStyle;e.$fluro.auth.retrieveUserFromResetToken(e.token,{application:r}).then(function(r){e.details=r,e.firstName=r.firstName,e.lastName=r.lastName,e.email=r.username||r.email,e.lastName=r.lastName,e.loading=!1}).catch(function(r){var a=e.$fluro.utils.errorMessage(r);e.$toasted.show(a,{duration:5500,type:"error"}),e.$router.replace({name:"home"})})},computed:{emailErrors:function(){var e=[];return this.$v.email.$dirty?(this.$v.email.email||e.push("Must be valid email address"),this.$v.email.required||e.push("Email is required"),e):e},passwordErrors:function(){var e=[];return this.$v.password.$dirty?(this.$v.password.required||e.push("Please type your password"),e):e},confirmErrors:function(){var e=[];return this.$v.confirmPassword.$dirty?(this.$v.confirmPassword.required||e.push("Please confirm your password"),this.$v.confirmPassword.isMatch||e.push("Your passwords do not match"),e):e},firstNameErrors:function(){var e=[];return this.$v.firstName.$dirty?(this.$v.firstName.required||e.push("Please type your first name"),e):e},lastNameErrors:function(){var e=[];return this.$v.lastName.$dirty?(this.$v.lastName.required||e.push("Please type your last name"),e):e}},methods:{submit:function(){var e=this;e.loading=!0;var r={username:e.email,firstName:e.firstName,lastName:e.lastName,password:e.password,confirmPassword:e.confirmPassword},a=this.application&&"application"==this.application.authenticationStyle;e.$fluro.auth.updateUserWithToken(e.token,r,{application:a}).then(function(r){console.log("Were good!"),e.loading=!1,e.$toasted.show("Changes saved!",{duration:3500,type:"success"}),e.$router.replace({name:"home"})}).catch(function(r){var a=e.$fluro.utils.errorMessage(r);e.$toasted.show(a,{duration:3500,type:"error"}),console.log("Error",a,r),e.loading=!1})}}},c=d,m=a("2877"),p=a("6544"),f=a.n(p),h=a("8336"),v=a("a523"),w=a("0e8f"),$=a("a722"),g=a("490a"),N=a("2677"),b=Object(m["a"])(c,t,s,!1,null,null,null);b.options.__file="UserReset.vue";r["default"]=b.exports;f()(b,{VBtn:h["a"],VContainer:v["a"],VFlex:w["a"],VLayout:$["a"],VProgressCircular:g["a"],VTextField:N["a"]})}}]);
//# sourceMappingURL=chunk-2d21a958.75857302.js.map