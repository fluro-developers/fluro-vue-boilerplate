(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-20026341"],{baef:function(e,t,r){"use strict";t["a"]={beforeRouteEnter:function(e,t,r){return console.log("Entering route",e),r()},beforeRouteUpdate:function(e,t,r){return console.log("route update"),r()},beforeRouteLeave:function(e,t,r){return console.log("Leaving route",t),r()}}},ca26:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("page",{attrs:{flex:""}},[r("flex-column",[r("flex-column-header",[r("page-header",{attrs:{type:"contact"},scopedSlots:e._u([{key:"left",fn:function(){return[r("h3",[e._v("Contacts\n                        "),r("v-menu",{attrs:{fixed:!0,transition:"slide-y-transition","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("span",e._g({staticClass:"text-muted"},a),[e._v("\n                                    "+e._s(e.viewMode.title)+"\n                                    "),r("fluro-icon",{staticStyle:{"font-size":"0.7em"},attrs:{icon:"angle-down"}})],1)]}}])},[r("v-list",{attrs:{dense:""}},e._l(e.viewModes,function(t){return r("v-list-tile",{on:{click:function(r){e.viewMode=t}}},[r("v-list-tile-content",[e._v("\n                                        "+e._s(t.title)+"\n                                    ")]),r("fluro-icon",{attrs:{icon:t.icon,right:""}})],1)}),1)],1)],1)]},proxy:!0},{key:"right",fn:function(){return[!e.showFilters&&e.$vuetify.breakpoint.smAndUp?r("div",{staticClass:"search",class:{active:e.searchFocussed||e.search.length}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],attrs:{placeholder:"Search by keyword"},domProps:{value:e.search},on:{focus:function(t){e.searchFocussed=!0},blur:function(t){e.searchFocussed=!1},input:function(t){t.target.composing||(e.search=t.target.value)}}}),r("div",{staticClass:"search-icon",on:{click:function(t){e.search=""}}},[e.search.length?r("fluro-icon",{attrs:{icon:"times"}}):r("fluro-icon",{attrs:{icon:"search"}})],1)]):e._e(),r("v-btn",{staticClass:"pa-2 mx-2",attrs:{color:"primary",small:""}},[r("span",[e._v("New")]),r("fluro-icon",{attrs:{right:"",icon:"plus"}})],1),r("v-btn",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"pa-2 mx-2",attrs:{content:"Show/Hide filters",small:""},on:{click:function(t){e.showFilters=!e.showFilters}}},[r("span",[e._v("Filters")]),e.showFilters?r("fluro-icon",{attrs:{right:"",icon:"times"}}):r("fluro-icon",{attrs:{right:"",icon:"filter"}})],1)]},proxy:!0},{key:"rightmobile",fn:function(){return[r("v-btn",{staticClass:"ma-0 mr-1",attrs:{small:"",color:"primary"}},[r("span",[e._v("New")]),r("fluro-icon",{attrs:{right:"",icon:"plus"}})],1),r("v-btn",{staticClass:"ma-0",attrs:{icon:""},on:{click:function(t){e.showFilters=!e.showFilters}}},[r("fluro-icon",{attrs:{icon:"filter",library:e.showFilters?"fas":"far"}})],1)]},proxy:!0}])})],1),r("flex-column-body",[r("v-layout",{attrs:{"fill-height":""}},[r("flex-column",{directives:[{name:"show",rawName:"v-show",value:e.$vuetify.breakpoint.smAndUp||!e.showFilters,expression:"$vuetify.breakpoint.smAndUp || !showFilters"}]},[r("fluro-data-table",{attrs:{clicked:e.rowClicked,search:e.search,"data-source":"/content/contact","init-page":e.$route.query.page,"filter-config":e.filterConfig,"init-sort":{sortKey:e.$route.query.sortKey,sortDirection:e.$route.query.sortDirection,sortType:e.$route.query.sortType},columns:e.columns},on:{raw:e.rowsChanged,page:e.pageChanged,sort:e.sortChanged}})],1),r("div",{directives:[{name:"show",rawName:"v-show",value:e.showFilters,expression:"showFilters"}],staticClass:"filter-sidebar scroll-y"},[r("v-container",{attrs:{"pa-2":""}},[r("div",{staticClass:"search",class:{active:e.searchFocussed||e.search.length}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],attrs:{placeholder:"Keyword search"},domProps:{value:e.search},on:{focus:function(t){e.searchFocussed=!0},blur:function(t){e.searchFocussed=!1},input:function(t){t.target.composing||(e.search=t.target.value)}}}),r("div",{staticClass:"search-icon",on:{click:function(t){e.search=""}}},[e.search.length?r("fluro-icon",{attrs:{icon:"times"}}):r("fluro-icon",{attrs:{icon:"search"}})],1)])]),r("filter-condition-group",{attrs:{rows:e.rows,mini:!0,type:"contact",debounce:e.filterDebounce},model:{value:e.filterConfig,callback:function(t){e.filterConfig=t},expression:"filterConfig"}})],1)],1)],1)],1)],1)},n=[],s=r("df8c"),o=s["a"],i=r("2877"),c=r("6544"),l=r.n(c),u=r("8336"),d=r("a523"),f=r("a722"),p=r("8860"),h=r("ba95"),m=r("5d23"),y=r("e449"),g=Object(i["a"])(o,a,n,!1,null,null,null);t["default"]=g.exports;l()(g,{VBtn:u["a"],VContainer:d["a"],VLayout:f["a"],VList:p["a"],VListTile:h["a"],VListTileContent:m["a"],VMenu:y["a"]})},df8c:function(e,t,r){"use strict";(function(e){r("ac6a");var a=r("f499"),n=r.n(a),s=r("5176"),o=r.n(s),i=(r("a481"),r("c5f6"),r("f217")),c=r("baef"),l=r("6cd4"),u=r("a00b"),d=r("1688"),f=r("22de"),p=r("f811"),h=r("d4f3"),m=r("a026"),y=m["default"].extend({props:{row:{type:Object},column:{type:Object},data:{}},template:'<fluro-realm-dots :realms="data"/>'}),g=m["default"].extend({props:{row:{type:Object},column:{type:Object},data:{}},template:'<span>{{row.preferredName || row.firstName}} <span class="muted" v-if="row.ethnicName">{{row.ethnicName}}</span></span>'}),v=m["default"].extend({props:{row:{type:Object},column:{type:Object},data:{}},template:'<span>{{row.lastName}} <span class="muted" v-if="row.maidenName">({{row.maidenName}})</span></span>'}),w=m["default"].extend({props:{row:{type:Object},column:{type:Object},data:{}},template:'<fluro-avatar md :id="data" type="contact" />'}),b=m["default"].extend({props:{row:{type:Object},column:{type:Object},data:{}},template:'<span class="inline-tag" :content="data | timeago" v-tippy>{{data | formatDate(\'MMM D, YYYY\')}}</span>'}),k=m["default"].extend({props:{row:{type:Object},column:{type:Object},data:{}},template:'\n    <div>\n     <fluro-status-label right v-if="row.status != \'active\'" :value="row.status"/>\n        <strong>{{row.title}}</strong><br/>\n       \n    </div>'}),C=[{title:"List",value:"default",icon:"bars"},{title:"Map",value:"map",icon:"map-marked"},{title:"Duplicates",value:"duplicates",icon:"users-class"},{title:"Checkins",value:"checkins",icon:"sign-in"}],x={operator:"and",filters:[{operator:"and",filters:[{key:"status",comparator:"==",value:"active"}]}]};t["a"]={props:{startPage:{type:Number,default:1}},components:{FluroDataTable:f["a"],FilterConditionGroup:p["default"]},mixins:[c["a"],i["a"],u["a"],l["a"],d["i"]],created:function(){},destroyed:function(){},data:function(){var e=x;return this.$route.query.filter&&this.$route.query.filter.length&&(e=JSON.parse(this.$route.query.filter)),{rows:[],showFilters:!1,filterConfig:e,viewModes:C,viewMode:C[0],selection:this.$selection,search:"",searchFocussed:!1,columns:[{title:"",shrink:!0,align:"center",key:"realms",renderer:y},{title:"",key:"_id",renderer:w,sortable:!1},{title:"Title",key:"title",renderer:k},{title:"First Name",key:"firstName",renderer:g},{title:"Last Name",key:"lastName",renderer:v},{type:"integer",title:"Age",shrink:!0,key:"age",sortType:"number"},{title:"Gender",shrink:!0,align:"center",key:"gender"},{title:"Household",shrink:!0,key:"family"},{type:"date",title:"Updated",shrink:!0,key:"updated",renderer:b,sortType:"date"},{type:"date",title:"Created",shrink:!0,key:"created",renderer:b,sortType:"date"},{title:"Status",key:"status"}]}},computed:{columnKeys:function(){return e.map(this.columns,"key")},filterDebounce:function(){return this.$vuetify.breakpoint.smAndDown?1500:700},filterChangeString:function(){return h["a"].getFilterChangeString(this.filterConfig)}},watch:{filterChangeString:function(){console.log("Filters changed",this.filterConfig),this.$router.replace({query:o()({},this.$route.query,{filter:n()(this.filterConfig)})})}},methods:{groupByHousehold:function(t){return e.chain(t).reduce(function(t,r,a){var n=e.get(r,"family.title")?"".concat(e.get(r,"family.title")):"".concat(e.get(r,"lastName")," (no household)"),s=e.get(r,"family._id")||e.get(r,"lastName"),o=t[s];return o||(o=t[s]={title:n,items:[],index:a}),o.items.push(r),t},{}).values().orderBy("index").value()},rowClicked:function(e,t){e._type="contact",this.$fluro.global.view(e)},rowsChanged:function(e){this.rows=e},pageChanged:function(e){this.$router.push({query:o()({},this.$route.query,{page:e})})},sortChanged:function(e){this.$router.replace({query:o()({},this.$route.query,e)})}},asyncComputed:{}}}).call(this,r("2ef0"))}}]);
//# sourceMappingURL=chunk-20026341.301a4181.js.map