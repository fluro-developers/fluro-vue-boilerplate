(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-358700ce"],{"2fdb":function(t,e,n){"use strict";var r=n("5ca1"),o=n("d2c8"),i="includes";r(r.P+r.F*n("5147")(i),"String",{includes:function(t){return!!~o(this,t,i).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},"3bc1":function(t,e,n){"use strict";(function(t){var r,o=n("bd86"),i=n("795b"),a=n.n(i),s=(n("6762"),n("2fdb"),n("7f7f"),n("28a5"),n("386d"),n("3be4")),c=n("1688"),u=n("a00b"),l=n("86a8");e["a"]=(r={mixins:[u["a"],l["a"]],components:{FluroInfiniteScroll:c["e"],FluroPagedContent:c["f"],PhotoEventTeaser:s["a"]},data:function(){return{loading:!0,search:"",searchFocussed:!1,debouncedSearch:this.search}},computed:{routeKey:function(){return this.$route.name.split(".")[0]}},methods:{view:function(t){var e=this.$fluro.utils.getStringID(t);console.log("PUSH EVENT NOW"),this.$router.push({name:"photos.event",params:{source:e}})},chunked:function(e,n){return t.chunk(e,n)}},created:function(){},watch:{search:t.debounce(function(t){this.debouncedSearch=t},500)}},Object(o["a"])(r,"computed",{sorted:function(){var e=this;return t.orderBy(e.filtered,function(t){return-1*new Date(t.startDate)})},filtered:function(){var e=this,n=e.events;if(!e.debouncedSearch||!e.debouncedSearch.length)return n;var r=String(e.debouncedSearch).toLowerCase().trim(),o=r.split(" ");return t.filter(n,function(e){var n=String(e.title).trim().toLowerCase(),i=t.includes(n,r);if(i)return!0;var a=n.split(" ");a=a.concat(e.keywords);var s=t.every(o,function(e){return t.some(a,function(n){return t.includes(n,e)})});return!!s||void 0})}}),Object(o["a"])(r,"asyncComputed",{events:{default:[],get:function(){var t=this;return t.loading=!0,new a.a(function(e,n){t.$fluro.api.get("/photos/event/list",{params:{limit:1e4}}).then(function(n){e(n.data),t.loading=!1},function(e){n(e),t.loading=!1})})}}}),r)}).call(this,n("2ef0"))},"3be4":function(t,e,n){"use strict";var r=function(){var t,e=this,n=e.$createElement,r=e._self._c||n;return r("div",{staticClass:"teaser"},[r("fluro-image",{attrs:{cover:"",spinner:!0,height:250,item:e.item.cover},on:{load:e.onLoad,error:e.onError}}),r("div",{staticClass:"text"},[r("div",[r("h2",[e._v(e._s(e.item.title))]),r("h4",[e._v(e._s(e._f("readableEventDate")(e.item)))]),r("h6",[e._v(e._s(e.realms))]),r("h5",[e._v(e._s(e.item.count)+" photos")])])]),r("div",{staticClass:"thumb-bottom"},[r("div",{staticClass:"thumb-right"},[e.user?r("v-btn",{attrs:{dark:"",icon:""},on:{click:function(t){return t.stopPropagation(),e.togglePin()}}},[r("font-awesome-icon",e._b({attrs:{icon:e.pinIcon}},"font-awesome-icon",(t={},t["spin"]=e.pinning,t),!1))],1):e._e()],1)])],1)},o=[],i=n("f202"),a=i["a"],s=(n("3db4"),n("2877")),c=n("6544"),u=n.n(c),l=n("8336"),f=Object(s["a"])(a,r,o,!1,null,"087b9912",null);e["a"]=f.exports;u()(f,{VBtn:l["a"]})},"3db4":function(t,e,n){"use strict";var r=n("9540"),o=n.n(r);o.a},5147:function(t,e,n){var r=n("2b4c")("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,!"/./"[t](e)}catch(o){}}return!0}},6762:function(t,e,n){"use strict";var r=n("5ca1"),o=n("c366")(!0);r(r.P,"Array",{includes:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")("includes")},"6dd4":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("flex-column",[n("flex-column-header",[n("page-header",{attrs:{type:"event"},scopedSlots:t._u([{key:"left",fn:function(){return[n("h3",[t._v("Photos "),n("span",{staticClass:"text-muted"},[t._v("Events")])])]},proxy:!0},{key:"right",fn:function(){return[n("div",{staticClass:"search",class:{active:t.searchFocussed||t.search.length}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],attrs:{placeholder:"Filter events by keyword"},domProps:{value:t.search},on:{focus:function(e){t.searchFocussed=!0},blur:function(e){t.searchFocussed=!1},input:function(e){e.target.composing||(t.search=e.target.value)}}}),n("div",{staticClass:"search-icon",on:{click:function(e){t.search=""}}},[t.search.length?n("fluro-icon",{attrs:{icon:"times"}}):n("fluro-icon",{attrs:{icon:"search"}})],1)])]},proxy:!0}])})],1),t.loading?n("fluro-page-preloader",{attrs:{contain:""}}):[t.sorted.length>1200?[n("fluro-paged-content",{attrs:{items:t.sorted,"per-page":12},scopedSlots:t._u([{key:"default",fn:function(e){return[n("v-container",{attrs:{"pa-1":"",fluid:"","grid-list-sm":""}},[n("v-layout",{attrs:{row:"",wrap:""}},t._l(e.page,function(e){return n("v-flex",{attrs:{"d-flex":"",xs12:"",sm6:"",md4:"",lg3:""},on:{click:function(n){return t.view(e)}}},[n("photo-event-teaser",{attrs:{item:e}})],1)}),1)],1)]}}],null,!1,2761702420)})]:[n("flex-column-body",{attrs:{"scroll-parent":""}},[n("fluro-infinite-scroll",{attrs:{perPage:24,startPage:1,items:t.sorted},scopedSlots:t._u([{key:"default",fn:function(e){return[n("v-container",{attrs:{"pa-1":"",fluid:"","grid-list-sm":""}},[n("v-layout",{attrs:{row:"",wrap:""}},t._l(e.page,function(e){return n("v-flex",{attrs:{"d-flex":"",xs12:"",sm6:"",md4:"",lg3:""},on:{click:function(n){return t.view(e)}}},[n("photo-event-teaser",{attrs:{item:e}})],1)}),1)],1)]}}])})],1)]]],2)},o=[],i=n("3bc1"),a=i["a"],s=(n("a508"),n("2877")),c=n("6544"),u=n.n(c),l=n("a523"),f=n("0e8f"),d=n("a722"),h=Object(s["a"])(a,r,o,!1,null,null,null);e["default"]=h.exports;u()(h,{VContainer:l["a"],VFlex:f["a"],VLayout:d["a"]})},"86a8":function(t,e,n){"use strict";(function(t){n("a481"),n("20d6");e["a"]={methods:{view:function(t){var e=this.$fluro.utils.getStringID(t);this.$router.push({query:{photo:e}})},previousPhoto:function(e){var n=this,r=n.sorted||[],o=t.findIndex(r,{_id:e}),i=o;i-=1,i<0&&(i=r.length-1);var a=r[i];if(console.log("PREVIOUS",e,o,i,a,r),a){var s=n.$fluro.utils.getStringID(a);n.$router.replace({query:{photo:s}})}},nextPhoto:function(e){var n=this,r=n.sorted||[],o=t.findIndex(r,{_id:e}),i=o;i+=1,i>r.length-1&&(i=0),console.log("NEXT",e,o,i,r);var a=r[i];if(a){var s=n.$fluro.utils.getStringID(a);n.$router.replace({query:{photo:s}})}}},activated:function(){console.log("PHOTO ACTIVATED");var t=this;t.$fluro.addEventListener("previousPhoto",t.previousPhoto),t.$fluro.addEventListener("nextPhoto",t.nextPhoto)},deactivated:function(){console.log("PHOTO DEACTIVATED");var t=this;t.$fluro.removeEventListener("previousPhoto",t.previousPhoto),t.$fluro.removeEventListener("nextPhoto",t.nextPhoto)}}}).call(this,n("2ef0"))},"8d5b":function(t,e,n){},9540:function(t,e,n){},a508:function(t,e,n){"use strict";var r=n("8d5b"),o=n.n(r);o.a},d2c8:function(t,e,n){var r=n("aae3"),o=n("be13");t.exports=function(t,e,n){if(r(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(o(t))}},f202:function(t,e,n){"use strict";(function(t){var r=n("bf89");e["a"]={props:{item:{type:Object}},mixins:[r["a"]],computed:{realms:function(){return this.item.realms.length>5?this.item.realms.length+" realms":t.map(this.item.realms,"title").join(", ")},smallUrl:function(){return this.$fluro.asset.coverImage(this.item,"event",{w:50})},url:function(){return this.$fluro.asset.coverImage(this.item,"event",{w:320})},aspectRatio:function(){var t=this.item.cover;return t.width/t.height}},data:function(){return{loading:!0}},methods:{onLoad:function(){this.loading=!1},onError:function(){this.loading=!1}}}}).call(this,n("2ef0"))}}]);
//# sourceMappingURL=chunk-358700ce.2718f818.js.map