{"version":3,"sources":["webpack:///./src/mixins/PagedMixin.js","webpack:///./src/router/routes/UserAccounts.vue?d7b3","webpack:///src/router/routes/UserAccounts.vue","webpack:///./src/router/routes/UserAccounts.vue?4287","webpack:///./src/router/routes/UserAccounts.vue"],"names":["__webpack_exports__","props","currentPage","type","Number","default","_Users_cadeembery_code_new_boilerplate_node_modules_babel_runtime_corejs2_core_js_parse_int__WEBPACK_IMPORTED_MODULE_1___default","this","$route","query","page","methods","pageChanged","index","$router","push","_Users_cadeembery_code_new_boilerplate_node_modules_babel_runtime_corejs2_core_js_object_assign__WEBPACK_IMPORTED_MODULE_0___default","render","_vm","_h","$createElement","_c","_self","user","_e","staticClass","attrs","xs","_v","loaded","indeterminate","accounts","append-icon","label","single-line","hide-details","model","value","callback","$$v","search","expression","rows-per-page-items","pageOptions","headers","items","filtered","scopedSlots","_u","key","fn","_s","item","title","flat","color","on","click","$event","changeAccount","right","icon","staticRenderFns","UserAccountsvue_type_script_lang_js_","mixins","SEOMixin","PagedMixin","UserMixin","src","data","text","align","sortable","created","self","routeSearch","component","$on","keywords","retrieveAccounts","computed","lodash_default","a","get","asyncComputed","terms","promise_default","resolve","reject","length","options","shouldSort","tokenize","matchAllTokens","findAllMatches","threshold","location","distance","maxPatternLength","minMatchCharLength","keys","$search","then","res","err","account","currentAccountID","_id","complete","promise","$fluro","auth","console","log","name","utils","errorMessage","api","routes_UserAccountsvue_type_script_lang_js_","Object","componentNormalizer","installComponents_default","VBtn","VCard","VCardTitle","VContainer","VDataTable","VProgressCircular","VSpacer","VGrid","VTextField"],"mappings":"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","file":"js/chunk-15ef742c.a9492db0.js","sourcesContent":["export default {\n\tprops:{\n\t\tcurrentPage:{\n\t\t\ttype:Number,\n\t\t\tdefault:function() {\n\t\t\t\treturn parseInt(this.$route.query.page) || 1;\n\t\t\t}\n\t\t}\n\t},\n    methods:{\n    \tpageChanged(index) {\n\n    \t\tthis.currentPage = index;\n    \t\t//Leave all of the current router parameters and query details\n    \t\t//and update the ?page= in the url\n            this.$router.push({ query: Object.assign({}, this.$route.query, { page: index }) });\n    \t}\n    }\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('page',[_c('v-container',[(!_vm.user)?_c('constrain',{staticClass:\"text-xs-center\",attrs:{\"xs\":\"\"}},[_c('p',[_vm._v(\"This page is only available to authenticated users\")])]):_vm._e(),(_vm.user)?_c('constrain',[_c('v-container',{staticClass:\"page-header\"},[_c('h1',[_vm._v(\"Change Account\")]),_c('p',[_vm._v(\"Select an account below\")]),(!_vm.loaded)?_c('div',[_c('v-progress-circular',{attrs:{\"indeterminate\":\"\"}}),_c('div',[_vm._v(\"Loading...\")])],1):_vm._e()]),(_vm.accounts.length)?_c('v-container',[_c('v-card',[_c('v-card-title',[_vm._v(\"\\n                        Accounts\\n                        \"),_c('v-spacer'),_c('v-text-field',{attrs:{\"append-icon\":\"search\",\"label\":\"Search\",\"single-line\":\"\",\"hide-details\":\"\"},model:{value:(_vm.search),callback:function ($$v) {_vm.search=$$v},expression:\"search\"}})],1),_c('v-data-table',{staticClass:\"elevation-1\",attrs:{\"rows-per-page-items\":_vm.pageOptions,\"headers\":_vm.headers,\"items\":_vm.filtered},scopedSlots:_vm._u([{key:\"items\",fn:function(props){return [_c('td',[_c('strong',[_vm._v(_vm._s(props.item.title))])]),_c('td',{staticClass:\"text-xs-right\"},[_c('v-btn',{attrs:{\"flat\":\"\",\"color\":\"primary\"},on:{\"click\":function($event){return _vm.changeAccount(props.item)}}},[_c('span',[_vm._v(\"Sign In\")]),_c('font-awesome-icon',{attrs:{\"right\":\"\",\"icon\":['fas', 'arrow-right']}})],1)],1)]}}],null,false,3686837940)})],1)],1):_vm._e()],1):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <page>\n        <v-container>\n            <constrain class=\"text-xs-center\" xs v-if=\"!user\">\n                <p>This page is only available to authenticated users</p>\n            </constrain>\n            <constrain v-if=\"user\">\n                <v-container class=\"page-header\">\n                    <h1>Change Account</h1>\n                    <p>Select an account below</p>\n                    <div v-if=\"!loaded\">\n                        <v-progress-circular indeterminate></v-progress-circular>\n                        <div>Loading...</div>\n                    </div>\n                </v-container>\n                <v-container v-if=\"accounts.length\">\n                    <v-card>\n                        <v-card-title>\n                            Accounts\n                            <v-spacer></v-spacer>\n                            <v-text-field v-model=\"search\" append-icon=\"search\" label=\"Search\" single-line hide-details></v-text-field>\n                        </v-card-title>\n                        <v-data-table :rows-per-page-items=\"pageOptions\" :headers=\"headers\" :items=\"filtered\" class=\"elevation-1\">\n                            <template v-slot:items=\"props\">\n                                <td><strong>{{ props.item.title }}</strong></td>\n                                <td class=\"text-xs-right\">\n                                    <v-btn flat color=\"primary\" @click=\"changeAccount(props.item)\">\n                                        <span>Sign In</span>\n                                        <font-awesome-icon right :icon=\"['fas', 'arrow-right']\" />\n                                    </v-btn>\n                                </td>\n                            </template>\n                        </v-data-table>\n                    </v-card>\n                </v-container>\n            </constrain>\n        </v-container>\n    </page>\n</template>\n<script>\n// import { mapGetters, mapMutations } from 'vuex';\nimport _ from 'lodash';\n\nimport SEOMixin from '@/mixins/SEOMixin';\nimport UserMixin from '@/mixins/UserMixin';\nimport PagedMixin from '@/mixins/PagedMixin';\nimport { Layout } from 'fluro-vue-ui';\n\n\nexport default {\n    mixins: [SEOMixin, PagedMixin, UserMixin, Layout],\n    data() {\n        return {\n            search: '',\n            // filtered:[],\n            pageOptions: [10, 25, 50, 100],\n            headers: [{\n                    text: 'Account Name',\n                    align: 'left',\n                    sortable: true,\n                    value: 'title',\n                },\n                {\n                    text: 'Actions',\n                    // align:'left',\n                    sortable: false,\n                    value: '_id',\n                },\n                // {\n                // text: 'Created',\n                // align:'left',\n                // sortable:true,\n                // value:'title',\n                // }\n            ],\n            loaded: false,\n            accounts: [],\n        }\n    },\n    created() {\n\n        var self = this;\n\n        if (self.routeSearch && self.routeSearch.component) {\n            self.routeSearch.component.$on('search', (keywords) => {\n                // do something with the data\n                self.search = keywords\n            });\n        }\n\n        return self.retrieveAccounts()\n    },\n    computed: {\n        routeSearch() {\n            return _.get(this, '$route.meta.search');\n        },\n    },\n    asyncComputed: {\n\n        filtered: {\n            default: [],\n            get() {\n\n                var self = this;\n                var terms = self.search;\n                //////////////////////////////////////\n\n                return new Promise(function(resolve, reject) {\n\n\n\n\n                    //////////////////////////////////////\n\n                    if (!terms || !terms.length) {\n                        return resolve(self.accounts);\n                    }\n\n                    //////////////////////////////////////\n\n                    var options = {\n                        shouldSort: true,\n                        tokenize: true,\n                        matchAllTokens: true,\n                        findAllMatches: true,\n                        threshold: 0.3,\n                        location: 0,\n                        distance: 2,\n                        maxPatternLength: 32,\n                        minMatchCharLength: 5,\n                        keys: [\n                            \"title\"\n                        ]\n                    };\n\n\n                    self.$search(terms, self.accounts, options)\n                        .then(function(res) {\n                            // console.log('RES', res);\n                            return resolve(res);\n                        }, function(err) {\n                            return resolve([]);\n                        });\n\n                })\n            }\n        }\n    },\n    methods: {\n        changeAccount(account) {\n\n            var self = this;\n\n            var currentAccountID = _.get(self, 'user.account._id');\n            if (currentAccountID == account._id) {\n                return complete();\n            }\n\n            //////////////////////////////////\n\n            var promise = self.$fluro.auth.changeAccount(account);\n\n            //////////////////////////////////\n\n            promise.then(complete, function(err) {\n\n                console.log('ERROR', err)\n                var message = self.$fluro.utils.errorMessage(err);\n            })\n\n            //////////////////////////////////\n\n            function complete() {\n\n                console.log('Switched into', account.title);\n\n                //Go to the home page\n                self.$router.push({\n                    name: 'home',\n                })\n            }\n        },\n        retrieveAccounts() {\n\n            var self = this;\n\n            if (!self.user) {\n                return;\n            }\n\n            self.loaded = false;\n\n\n\n\n\n            var promise = self.$fluro.api.get('/user/accounts', {\n\n            });\n\n            promise.then(function(res) {\n                self.accounts = res.data;\n                self.loaded = true;\n            }, function(err) {\n                console.log('ERROR!', err);\n                self.loaded = true;\n            })\n        }\n    }\n}\n</script>\n<style>\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserAccounts.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserAccounts.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserAccounts.vue?vue&type=template&id=65eef1b6&\"\nimport script from \"./UserAccounts.vue?vue&type=script&lang=js&\"\nexport * from \"./UserAccounts.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!/Users/cadeembery/code/new-boilerplate/node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib'\nimport { VCard } from 'vuetify/lib'\nimport { VCardTitle } from 'vuetify/lib'\nimport { VContainer } from 'vuetify/lib'\nimport { VDataTable } from 'vuetify/lib'\nimport { VProgressCircular } from 'vuetify/lib'\nimport { VSpacer } from 'vuetify/lib'\nimport { VTextField } from 'vuetify/lib'\ninstallComponents(component, {VBtn,VCard,VCardTitle,VContainer,VDataTable,VProgressCircular,VSpacer,VTextField})\n"],"sourceRoot":""}